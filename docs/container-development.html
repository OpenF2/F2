<!DOCTYPE html>
<html>
<head>
  <title>F2 - Container Development</title>
  <meta charset="utf-8">
  <meta name="dcterms.date" content="13 March 2013">
  <meta name="gitbranch" content="1.2-wip">
  <meta name="description" content="F2: The Open Financial Framework. An open framework created for the financial services industry.">
  <meta name="keywords" content="F2, Open F2, Open Financial Framework, Markit, Markit On Demand, MOD, web, web framework, apps, context, container, Hub">
  <meta name="robots" content="all, index, follow" />
  <meta name="distribution" content="global" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <meta name="X-UA-Compatible" content="IE=edge,chrome=1" />
  <link rel="home" href="http://www.openf2.org/" />
  
  <script src="./js/modernizr.2.6.2.custom.min.js"></script>
  <script src="./js/respond.min.js"></script>
  
  <link href="./css/prettify.css" rel="stylesheet">
  <link href="./css/F2.Docs.css?1.2.0" rel="stylesheet">
  
  <link rel="icon" href="./img/favicon-32px.png" type="image/png"/>
  <link rel="apple-touch-icon" sizes="57x57" href="./img/touch-icon-57.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="./img/touch-icon-72.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="./img/touch-icon-114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./img/touch-icon-144.png" />
  
  <script type="text/javascript">
  	if ('1.2-wip' === 'master'){
  		var _gaq = _gaq || [];
  		_gaq.push(['_setAccount', 'UA-35230380-1']);
  		_gaq.push(['_setDomainName', 'openf2.org']);
  		_gaq.push(['_trackPageview']);
  
  		(function() {
  		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  		})();
  	}
  </script>
</head>
<body data-spy="scroll" data-target="#toc" data-offset="0">
<header class="openf2Header navbarmini clearfix">
  <nav class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <button class="btn btn-navbar" type="button" data-toggle="collapse" data-target=".nav-collapse.main-nav">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-triangleDown"></span>
        </button>
        <a class="brand" href="http://www.openf2.org"></a>
        <div class="tagline-divider"></div>
        <div class="navbar-text pull-left">The Open Financial Framework</div>
        <div class="collapse nav-collapse main-nav">
          <ul class="nav pull-right">
            <li><a href="http://www.openf2.org">Home</a></li>
            <li class="divider-vertical"></li>
            <li class="active">
                <a href="http://docs.openf2.org">Docs <i class="icon-triangleDown"></i></a>
                  <ul class="nav navinset">
                    <li><a href="./">The Basics</a></li>
                    <li><a href="app-development.html">Development</a></li>
                    <li><a href="./sdk/">Reference</a></li>
                  </ul>
            </li>
            <li class="divider-vertical"></li>
            <li><a href="http://www.openf2.org/Examples">Examples</a></li>
            <li class="divider-vertical"></li>
            <li><a href="https://developer.openf2.org">Developer</a></li>
            <li class="divider-vertical"></li>
            <li><a href="http://blog.openf2.org" target="_blank">Blog</a></li>
            <li class="divider-vertical"></li>
            <li class="ghWrap"><a class="gitHubLink" href="https://github.com/OpenF2/F2/"><strong>VIEW </strong><span class="onDecoration">ON</span><strong> GITHUB</strong><span class="F2VersionIndicator">v 1.2.0</span></a></li>
            <li class="ghWrapResp"><a href="https://github.com/OpenF2/F2/">View on GitHub (v 1.2.0)</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="navbar-docs">
      <nav class="container">
        <div class="row">
          <div class="span12">
              <ul class="unstyled clearfix">
                <li class="basics"><a href="./">The Basics</a></li>
                <li class="dev"><a href="app-development.html">Development</a></li>
                <li class="ref"><a href="./sdk/">Reference</a></li>
              </ul>
          </div>
        </div>
      </nav>
    </div>

		<div class="navbar-docs-sections">
			<div class="container">
				<a href="javascript:;" data-toggle="collapse" data-target=".nav-collapse.toc">
					SECTIONS
					<span class="icon-triangleDown"></span>
				</a>
				<div class="collapse nav-collapse toc">
					<ul id="tocResponsive" class="nav pull-right">
						<!--nav generated in ./js/docs.js-->
					</ul>
				</div>
			</div>
		</div>

  </nav>
</header>

<div class="container">
  <div class="row">
    <div class="span3" id="toc">
        <ul class="nav nav-list">
          <!--nav generated in ./js/docs.js-->
        </ul>
    </div><!--/span3-->

	<div class="span9">
		<div id="docs">
<header>
<h1 class="title">Container Development</h1>
</header>
<p class="lead">
You've come to the right place if you want to start building F2 containers. Before continuing, make sure you've <a href="https://github.com/OpenF2/F2#quick-start">cloned the F2 repository on GitHub</a> or <a href="index.html#get-started">downloaded the latest framework build</a> (v1.2.0). Secondly, <a href="index.html#framework">read about the F2 Framework</a>. There are a few important concepts to help you better understand apps, containers and context.
</p>

<hr>
<section class="level2" id="get-started">
<h2>Get Started</h2>
<p>To help you get started building an F2 container, browse through the resources below. To jump start your F2 container and app development, download the F2 template (which now includes a basic container) <em>or</em> follow the instructions below.</p>
<p>
<a href="https://github.com/downloads/OpenF2/F2/Basic-F2-App-Template-1.0.4.zip" class="btn btn-primary">Download Basic F2 Container Template</a>
</p>

<section class="level3" id="basic-container">
<h3>Basic Container</h3>
<p>To begin, you <strong>do not need to build F2</strong> <a href="https://github.com/OpenF2/F2#build-f2">as described in the readme on GitHub</a>. Simply download <a href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a> and save a local copy of <a href="f2js-sdk.html">F2.js</a>. Also ensure you're <a href="#configuration">properly configured</a>.</p>
<p>
<a href="https://raw.github.com/OpenF2/F2/master/f2.js" class="btn">Download F2.js</a> <a href="http://twitter.github.com/bootstrap/getting-started.html#download-bootstrap" class="btn">Download Bootstrap</a>
</p>

<p>Create your basic container HTML template:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
    <span class="kw">&lt;head&gt;</span>
        <span class="kw">&lt;title&gt;</span>F2 Container<span class="kw">&lt;/title&gt;</span>
        <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;/path/to/your/bootstrap.css&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;/head&gt;</span>
    <span class="kw">&lt;body&gt;</span>
        <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;container&quot;</span><span class="kw">&gt;</span>
            <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;hero-unit&quot;</span><span class="kw">&gt;</span>
                <span class="kw">&lt;h1&gt;</span>Hello F2<span class="kw">&lt;/h1&gt;</span>
            <span class="kw">&lt;/div&gt;</span>
            <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span><span class="co">&lt;!--apps go here--&gt;</span><span class="kw">&lt;/div&gt;</span>
        <span class="kw">&lt;/div&gt;</span>
        <span class="co">&lt;!--include jQuery &amp; Bootstrap--&gt;</span>
        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;http://code.jquery.com/jquery-latest.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;/path/to/your/bootstrap.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        <span class="co">&lt;!--include F2.js--&gt;</span>
        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;/path/to/your/F2.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        <span class="co">&lt;!--init &amp; register--&gt;</span>
        <span class="kw">&lt;script&gt;</span>
            (<span class="kw">function</span>(){
                <span class="co">//define AppConfigs</span>
                <span class="kw">var</span> _appConfigs = [{
                    <span class="dt">appId</span>: <span class="st">&quot;com</span>_<span class="st">your</span>_<span class="st">app</span>_<span class="st">id&quot;</span>,
                    <span class="dt">description</span>: <span class="st">&quot;F2</span> <span class="st">app</span> <span class="st">description&quot;</span>,
                    <span class="dt">name</span>: <span class="st">&quot;F2</span> <span class="st">App&quot;</span>,
                    <span class="dt">manifestUrl</span>: <span class="st">&quot;</span>/<span class="st">path</span>/<span class="st">to</span>/<span class="st">your</span>/<span class="st">manifest</span>.<span class="st">js&quot;</span> <span class="co">//note the path to your manifest</span>!<span class="co"> </span>
                }];
                <span class="co">//Setup ContainerConfig</span>
                <span class="kw">F2</span>.<span class="fu">init</span>({
                    <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(app){
                        <span class="kw">var</span> appRoot = <span class="ch">&#39;</span>&lt;<span class="ch">section</span> <span class="ch">class</span>=&quot;<span class="ch">well</span> <span class="ch">span12</span>&quot;&gt;&lt;/<span class="ch">section</span>&gt;<span class="ch">&#39;</span>;
                        <span class="kw">return</span> $(appRoot).<span class="fu">appendTo</span>(<span class="ch">&#39;div</span>.<span class="ch">row&#39;</span>);
                    },
                    <span class="dt">afterAppRender</span>: <span class="kw">function</span> (app, html) {
                        <span class="co">//app</span>.<span class="co">root is </span>`<span class="co">appRoot</span>`<span class="co"> from beforeAppRender</span>()
<span class="co">                        return </span>$(<span class="co">app</span>.<span class="co">root</span>).<span class="co">append</span>(<span class="co">html</span>);
<span class="co">                    </span>}
<span class="co">                </span>});<span class="co"> </span>
                <span class="kw">F2</span>.<span class="fu">registerApps</span>(_appConfigs); <span class="co">//pass </span>_<span class="co">appConfigs to initialize apps</span>
            })();
        <span class="kw">&lt;/script&gt;</span>
    <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>In developing a more advanced container, the HTML document's <code>body</code> element would contain additional markup and allow for specific positioning or placement of apps. Additionally, more advanced containers could introduce features and functionality to their apps in the form of authentication APIs, streaming data feeds, federated search, etc. All containers must follow the <a href="#container-design">F2 design guidelines</a>.</p>
</section>
<section class="level3" id="basic-app">
<h3>Basic App</h3>
<p>Create your basic <a href="app-development.html#app-manifest">F2 app manifest</a> and save it as <code>/path/to/your/manifest.js</code> using this code below. Note the path to this file should be specified in the <code>manifestUrl</code> property within the <code>_appConfigs</code> array in your basic container (shown above).</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">F2_jsonpCallback_com_your_app_id({
    <span class="st">&quot;scripts&quot;</span>: [],   
    <span class="st">&quot;styles&quot;</span>: [],   
    <span class="st">&quot;apps&quot;</span>: [{
        <span class="st">&quot;data&quot;</span>: {},
        <span class="st">&quot;html&quot;</span>: <span class="st">&quot;&lt;div&gt;&lt;p&gt;Hello, world. I&#39;m an F2 app.&lt;/p&gt;&lt;/div&gt;&quot;</span>
    }]
})</code></pre>
<p><span class="label">Note</span> You can <a href="https://github.com/downloads/OpenF2/F2/Basic-F2-App-Template-1.0.4.zip">download the F2 container/app template</a> instead of creating the basic app by hand.</p>
</section>
<section class="level3" id="testing-the-basics">
<h3>Testing the Basics</h3>
<p>Now with a basic container and a basic app, you can load your F2 container and expect to see:</p>
<figure>
<img src="./img/basic-f2-app-test.png" title="Basic F2 app"><figcaption></figcaption>
</figure>
<p>In getting to this point, you've only scratched the surface of F2 containers and apps. Continue reading and understanding the F2 spec to build exactly the financial solutions that our customers want.</p>
</section>
<section class="level3" id="sample-apps-and-container">
<h3>Sample Apps and Container</h3>
<p>Good news! In the <a href="https://github.com/OpenF2/F2/tree/master/examples/container/">project repo on GitHub</a>, you will find a basic container along with a number of sample apps which demonstrate functionality far beyond the basic app above. Once you clone or download the project repository, open the sample container by pointing your browser at:</p>
<p><code>http://localhost/F2/examples/container/</code></p>
</section>
<section class="level3" id="configuration">
<h3>Configuration</h3>
<p>It is assumed you will be developing an F2 container locally and have a <code>localhost</code> setup. The URLs mentioned in this specification also assume you have configured your F2 container to run at <code>http://localhost/F2/</code>. The examples provided as part of the project repository demonstrate apps written in different languages (PHP, JavaScript, C#). While it is not a requirement you have a web server configured on your computer, it will certainly allow you to more deeply explore the sample apps.</p>
<p>To better understand F2 and the role of containers, you need to understand the role of apps. If you haven’t already, <a href="index.html#framework">read more about apps in the Framework</a>.</p>
<p>To get started working with or developing apps, browse to the <a href="app-development.html">documentation for developing apps</a>.</p>
<p><strong>Ready to start coding?</strong></p>
<p>
<a href="#developing-f2-containers" class="btn btn-primary">Developing F2 Containers</a> <a href="./sdk/" class="btn">F2.js SDK Reference</a>
</p>

<hr>
</section>
</section>
<section class="level2" id="container-design">
<h2>Container Design</h2>
<p>Design considerations are an important first step when creating a new container. Content can range from news to research to multimedia, and content should be presented using <a href="(http://www.alistapart.com/articles/understandingprogressiveenhancement/">Progressive Enhancement</a>, <a href="http://www.lukew.com/presos/preso.asp?26">Mobile First</a> and <a href="http://www.abookapart.com/products/responsive-web-design">Responsive Design</a> methodologies. That is to say multimedia content, for example, should be shown plugin-free (using HTML5 video or audio elements) for capable browsers and fallback to Flash-based players for browsers that do not yet support HTML5 related technologies. (<a href="http://videojs.com/">VideoJS</a> is good example of open-source JavaScript and CSS &quot;that makes it easier to work with and build on HTML5 video, today.&quot;)</p>
<p>If App Developers embed URLs back to their own websites or to third party sites, URLs must be opened in a new window as to not interrupt the experience of someone using the container. If authentication is required on an App Developer's site, this can be accomplished with pass-through authentication using encrypted URLs as discussed in <a href="#single-sign-on">Single Sign On</a>.</p>
<section class="level3" id="choices">
<h3>Choices</h3>
<p>In order to ensure that apps built using F2 are successful, they must be accessible. As such, F2 made choices for which open-source libraries and frameworks would be leveraged to reduce the level of effort across F2 adopters.</p>
<p><a href="index.html#choices">Read more about those choices in the Framework</a>.</p>
<p>Ultimately, the responsibility of app design falls on either the Container or App Developer. In many cases, Container Developers will provide App Developers will visual designs, style guides or other assets required to ensure apps have the form and function for a given container. Container Developers may also <a href="index.html#creating-a-common-look-and-feel">provide CSS for App Developers</a> to adhere to—which should be easy since F2 enforces a <a href="app-development.html#automatic-consistency">consistent HTML structure across all containers and apps</a>.</p>
<hr>
</section>
</section>
<section class="level2" id="developing-f2-containers">
<h2>Developing F2 Containers</h2>
<p>A container is a browser-based desktop-like application which brings F2 apps together onto a seamless user interface. It also can provide horsepower to its apps in the form of request-response web services or streaming data feeds.</p>
<section class="level3" id="including-the-f2-sdk">
<h3>Including the F2 SDK</h3>
<p>For a webpage to be considered an F2 container, it must first include the <a href="f2js-sdk.html">F2.js JavaScript SDK</a>. This is as simple as <a href="f2js-sdk.html#download">downloading the F2 project from GitHub</a> and adding a <code>script</code> tag to the page.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">&lt;script src=<span class="st">&quot;/path/to/your/container/f2.js&quot;</span>&gt;&lt;/script&gt;</code></pre>
<p>You will find a basic container in the <a href="https://github.com/OpenF2/F2/tree/master/examples/container/">project repo on GitHub</a> along with a number of sample apps.</p>
<p>Once the script tag has been added, it is up to the Container Developer to configure and customize the container. The first step is getting a ContainerID.</p>
</section>
<section class="level3" id="f2-containerid">
<h3>F2 ContainerID</h3>
<p>To develop a production F2 container, you need a unique identifier called a ContainerID. This ContainerID will be unique to <em>your container</em> across the entire open financial framework ecosystem. The format of the ContainerID looks like this: <code>com_container_companyName_containerName</code>, where the <code>companyName</code> &quot;namespace&quot; is your company name and <code>containerName</code> is the name of your container.</p>
<p>As an example, your ContainerID could look like this:</p>
<p><code>com_container_acmecorp_watchlist</code></p>
<p>If you built more than one container while working at Acme Corporation, you could create more ContainerIDs. All of these are valid:</p>
<ul>
<li><code>com_container_acmecorp_activetrader</code></li>
<li><code>com_container_acmecorp_retail</code></li>
<li><code>com_container_acmecorp_mobilestreamer</code></li>
</ul>
<p>To guarantee uniqueness, we will provide a ContainerID generation service that allows customization of your ContainerID in the <a href="index.html#developer-center">Developer Center</a>.</p>
</section>
<section class="level3" id="setting-up-your-project">
<h3>Setting Up Your Project</h3>
<p>Once you have your ContainerID, start by setting up your container project. You will need at least one configuration in addition to an HTML page: the app configs. (In the GitHub repository, <a href="https://github.com/OpenF2/F2/blob/master/examples/container/js/sampleApps.js">an example</a> is found in <code>/examples/container/js/sampleApps.js</code>.) This doesn't need to be a static javascript file like <code>sampleApps.js</code> but the structure and format of the app configs is important.</p>
</section>
<section class="level3" id="app-configs">
<h3>App Configs</h3>
<p>An F2 Container Provider must deliver the app configs to its container before calling <code>F2.init()</code>. The app configurations are represented quite simply as a list of <a href="../docs/sdk/classes/F2.AppConfig.html">AppConfig objects</a>. These could be stored in a JavaScript array or in an enterprise-class database. AppConfig objects contain app meta data provided by the App Developer when he creates his app in the <a href="index.html#developer-center">Developer Center</a>.</p>
<p>Example <code>AppConfig</code> object from an <em>individual</em> app:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="dt">appId</span>: <span class="st">&quot;com_companyName_appName&quot;</span>,
    <span class="dt">description</span>: <span class="st">&quot;App description&quot;</span>,
    <span class="dt">height</span>: <span class="dv">500</span>,
    <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.domain.com/manifest.js&quot;</span>,
    <span class="dt">name</span>: <span class="st">&quot;App name&quot;</span>
}</code></pre>
<p>Example array of <code>AppConfig</code> objects for a collection of apps:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> _appConfigs = [
    {
        <span class="dt">appId</span>: <span class="st">&quot;com_companyName_appName&quot;</span>,
        <span class="dt">description</span>: <span class="st">&quot;App description&quot;</span>,
        <span class="dt">height</span>:<span class="dv">500</span>,
        <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.domain.com/manifest.js&quot;</span>,
        <span class="dt">name</span>: <span class="st">&quot;App name&quot;</span>
    },
    {
        <span class="dt">appId</span>: <span class="st">&quot;com_companyName_appName2&quot;</span>,
        <span class="dt">description</span>: <span class="st">&quot;App2 description&quot;</span>,
        <span class="dt">height</span>:<span class="dv">100</span>,
        <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.domain2.com/manifest.js&quot;</span>,
        <span class="dt">name</span>: <span class="st">&quot;App2 name&quot;</span>
    },
    {
        <span class="dt">appId</span>: <span class="st">&quot;com_companyName_appName3&quot;</span>,
        <span class="dt">description</span>: <span class="st">&quot;App3 description&quot;</span>,
        <span class="dt">height</span>:<span class="dv">200</span>,
        <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.domain3.com/manifest.js&quot;</span>,
        <span class="dt">name</span>: <span class="st">&quot;App3 name&quot;</span>
    }
];</code></pre>
</section>
<section class="level3" id="container-config">
<h3>Container Config</h3>
<p>The <a href="f2js-sdk.html">F2.js JavaScript SDK</a> provides an API for providers to configure their containers. Every container must be setup using <code>ContainerConfig</code> and the <a href="./sdk/classes/F2.ContainerConfig.html">methods available</a>.</p>
<p>In the container's <code>$(document).ready()</code>, add the <code>F2.init()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">$(<span class="kw">document</span>).<span class="fu">ready</span>(<span class="kw">function</span>(){
    <span class="kw">F2</span>.<span class="fu">init</span>({
        <span class="co">//define ContainerConfig properties</span>
        <span class="dt">appRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">afterAppRender</span>: <span class="kw">function</span>(appConfig){ ... }
    });
});</code></pre>
<p>To see an more detailed example of <code>F2.init()</code>, <a href="https://github.com/OpenF2/F2/blob/master/examples/container/js/container.js">look at the sample container javascript file</a> in the F2 repo on GitHub.</p>
<section class="level4" id="apprender">
<h4>AppRender</h4>
<p>The <code>appRender()</code> method allows the container to wrap an app in extra HTML. The function should accept an <code>F2.AppConfig</code> object and also a string of <code>HTML</code>. The extra HTML can provide links to edit app settings and remove an app from the container. See <code>F2.Constants.Css</code> for CSS classes that should be applied to elements.</p>
</section>
<section class="level4" id="beforeapprender">
<h4>BeforeAppRender</h4>
<p>The <code>beforeAppRender()</code> method allows the container to render HTML for an app before the <code>AppManifest</code> for an app has loaded. This can be useful if the design calls for loading spinners to appear for each app before each app is loaded and rendered to the page.</p>
</section>
<section class="level4" id="afterapprender">
<h4>AfterAppRender</h4>
<p>The <code>afterAppRender()</code> method allows the container to override how an app's HTML is inserted into the page. The function should accept an <code>F2.AppConfig</code> object and also a string of <code>HTML</code>.</p>
<p>For more information on <code>F2.ContainerConfig</code>, <a href="./sdk/classes/F2.ContainerConfig.html">browse to the F2.js SDK docs</a>.</p>
</section>
<section class="level4" id="f2-ui-mask">
<h4>F2 UI Mask</h4>
<p>Container Developers have the opportunity to customize some user interface (UI) elements which propagate to the App Developers' toolkit in F2.js. One of those is <code>F2.UI.Mask</code>. The <code>Mask</code> object contains configuration defaults for the <code>F2.UI.showMask()</code> and <code>F2.UI.hideMask()</code> methods.</p>
<p>An example of setting the mask in <code>F2.init()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">$(<span class="kw">document</span>).<span class="fu">ready</span>(<span class="kw">function</span>(){
    <span class="kw">F2</span>.<span class="fu">init</span>({
        <span class="co">//define ContainerConfig properties</span>
        <span class="dt">appRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">afterAppRender</span>: <span class="kw">function</span>(appConfig){ ... },

        <span class="co">//setup UI</span>
        <span class="dt">UI</span>:{
            <span class="dt">Mask</span>:{
                <span class="dt">loadingIcon</span>:<span class="ch">&#39;./img/spinner.gif&#39;</span>,
                <span class="dt">backgroundColor</span>: <span class="ch">&#39;#fff&#39;</span>,
                <span class="dt">opacity</span>: <span class="fl">0.5</span>
            }
        }
    });
});</code></pre>
<p>Included in the <code>F2.UI.Mask</code> configuration object are the following properties: <code>backgroundColor</code>, <code>loadingIcon</code>, <code>opacity</code>, <code>useClasses</code>, and <code>zIndex</code>. Each of these <code>F2.UI.Mask</code> properties is detailed in <a href="./sdk/classes/F2.ContainerConfig.UI.Mask.html">the F2.js SDK docs</a>.</p>
<p>For more information on <code>F2.UI</code>, <a href="./sdk/classes/F2.UI.html">browse to the F2.js SDK docs</a>.</p>
</section>
<section class="level4" id="container-templates">
<h4>Container Templates</h4>
<p>If you're looking for sample container HTML template code, jump to the <a href="#get-started">Get Started section</a>. There is also a basic F2 container/app template <a href="https://github.com/downloads/OpenF2/F2/Basic-F2-App-Template-1.0.4.zip">available for download on GitHub</a>.</p>
<hr>
</section>
</section>
</section>
<section class="level2" id="namespacing">
<h2>Namespacing</h2>
<p>F2 is a <em>web</em> integration framework which means apps are inherently insecure—at least those <em>non-secure</em> apps. Following this spec, App Developers must avoid CSS collisions and JavaScript namespace issues to provide users with the best possible experience.</p>
<p><span class="label">Note</span> Continue reading for <a href="#secure-apps">more specifics about secure apps</a>.</p>
<section class="level3" id="namespacing-css">
<h3>Namespacing CSS</h3>
<p>As discussed in <a href="#f2-containerid">Developing F2 Containers: F2 ContainerID</a>, to develop an F2 container, you need a unique identifier called an ContainerID. This ContainerID will be unique to your container across the entire open financial framework ecosystem. The format of the ContainerID looks like this: <code>com_container_companyName_appName</code>, where the <code>companyName</code> &quot;namespace&quot; is your company name and <code>appName</code> is the name of your app.</p>
<p>To avoid styling conflicts or other display issues related to app-provided style sheets, App Developers <a href="app-development.html#namespacing-css">must namespace their CSS selectors</a>. While there are strict rules for App Developers, the same rules apply to Container Developers. This is especially true when implementing <em>mutliple containers</em>.</p>
<p>In the event there are multiple containers, every CSS selector in container-provided style sheets must look like this:</p>
<pre class="sourceCode css"><code class="sourceCode css"><span class="fl">.com_container_companyName_appName</span> p <span class="kw">{</span>
    <span class="kw">padding:</span><span class="dt">5px</span><span class="kw">;</span>
<span class="kw">}</span>

<span class="fl">.com_container_companyName_appName</span> <span class="fl">.alert</span> <span class="kw">{</span>
    <span class="kw">color:</span><span class="dt">red</span><span class="kw">;</span>
<span class="kw">}</span></code></pre>
<p>Note <code>.com_container_companyName_appName</code> is prefixed on both <code>p</code> and <code>.alert</code> selectors.</p>
<p>While the <a href="http://www.webdesignfromscratch.com/html-css/css-inheritance-cascade/">CSS cascade</a> will assign more points to IDs and prefixing F2 ContainerIDs on CSS selectors isn't required, it is recommended.</p>
<pre class="sourceCode css"><code class="sourceCode css"><span class="fl">.com_container_companyName_appName</span> <span class="fl">#notice</span> <span class="kw">{</span>
    <span class="kw">background-color:</span><span class="dt">yellow</span><span class="kw">;</span>
<span class="kw">}</span></code></pre>
</section>
<section class="level3" id="keeping-javascript-clean">
<h3>Keeping JavaScript Clean</h3>
<p>Adhering to one of the <a href="http://www.openajax.org/">OpenAjax Alliance</a> goals, F2 also promotes the concept of an uncluttered global javascript namespace. For Container and App Developers alike, this means following this spec closely and ensuring javascript code is contained inside <a href="http://jibbering.com/faq/notes/closures/">closures</a> or is extended as a new namespace on <code>F2</code>.</p>
<p>The F2.js SDK was designed with extensibility in mind and therefore custom logic can be added on the <code>F2</code> namespace.</p>
<p>Example:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2</span>.<span class="fu">extend</span>(<span class="ch">&#39;YourPluginName&#39;</span>, (<span class="kw">function</span>(){
    <span class="kw">return</span> {
        <span class="dt">doSomething</span>: <span class="kw">function</span>(){
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;Something has been done.&quot;</span>);
        }
    };
})());</code></pre>
<p>For more information, read <a href="extending-f2.html">Extending F2</a>.</p>
<hr>
</section>
</section>
<section class="level2" id="context">
<h2>Context</h2>
<p>Apps are capable of sharing &quot;context&quot; with the container and other nearby apps. All apps have context which means the app &quot;knows&quot; who is using it and the content it contains. It is aware of an individual's data entitlements and user information that the container is requested to share (name, email, company, etc).</p>
<p>This means if a user wants to create a ticker-focused container so they can keep a close eye on shares of Proctor &amp; Gamble, the container can send &quot;symbol context&quot; to any listening apps that are smart enough to refresh when ticker symbol PG is entered in the container's search box.</p>
<p>While apps can have context themselves, the responsibility for managing context switching or context passing falls on the container. The container assumes the role of a traffic cop—managing which data goes where. By using JavaScript events, the container can listen for events sent by apps and likewise apps can listen for events sent by the container. To provide a layer of security, this means apps cannot communicate directly with other apps on their own; apps must communicate via an F2 container to other apps since the container controls the <a href="../docs/sdk/classes/F2.Events.html">F2.Events API</a>.</p>
<p><a href="index.html#framework">Read more in the Framework</a>.</p>
<section class="level3" id="how-to-use-context">
<h3>How to use Context</h3>
<p>Each container will be responsible for hosting the <a href="f2js-sdk.html">F2.js JavaScript SDK</a>. The F2 SDK not only provides the consistent mechanism app developers have come to expect for loading their apps on the container, but also contains an <a href="./sdk/classes/F2.Events.html">event API</a> for handling context.</p>
<p><span class="label label-important">Important</span> It is important to note that while apps can have context themselves, the responsibility for managing context switching or context passing falls on the container. The container assumes the role of a traffic cop—managing which data goes where. By using JavaScript events, the container can listen for events sent by apps and likewise apps can listen for events sent by the container. This means <strong>apps cannot communicate directly with other apps on their own</strong>; apps communicate via the container to other apps since the container controls the <code>F2.Events</code> API.</p>
<p>Let's look at some code.</p>
</section>
<section class="level3" id="container-to-app-context">
<h3>Container-to-App Context</h3>
<p>In this example, the container broadcasts, or emits, a javascript event defined in <code>F2.Events.Constants</code>. The <code>F2.Events.emit()</code> method accepts two arguments: the event name and an optional data object.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">CONTAINER</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;AAPL&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Apple, Inc.&quot;</span> 
    }
);</code></pre>
<p>To listen to the <code>F2.Constants.Events.CONTAINER_SYMBOL_CHANGE</code> event inside your F2 app, you can use this code to trigger an alert dialog with the symbol:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">CONTAINER</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;The symbol was changed to &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span>);
    }
);</code></pre>
<p>The <code>F2.Events.on()</code> method accepts the event name and listener function as arguments. <a href="./sdk/classes/F2.Events.html">Read the SDK</a> for more information.</p>
<p><span class="label">Note</span> For a full list of support event types, browse to the SDK for <a href="./sdk/classes/F2.Constants.Events.html">F2.Constants.Events</a>.</p>
</section>
<section class="level3" id="container-to-app-context-server">
<h3>Container-to-App Context (Server)</h3>
<p>Often times containers will want to send context to apps during <a href="./sdk/classes/F2.html#methods-registerApps">app registration</a>. This is possible through the <code>AppConfig.context</code> property. This <a href="./sdk/classes/F2.AppConfig.html#properties-context">property</a> can contain any javascript object—a string, a number, an array or an object.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">//define app config</span>
<span class="kw">var</span> _appConfigs = [
    {
        <span class="dt">appId</span>: <span class="st">&quot;com_acmecorp_news&quot;</span>,
        <span class="dt">description</span>: <span class="st">&quot;Acme Corp News&quot;</span>,
        <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.acme.com/apps/news-manifest.js&quot;</span>,
        <span class="dt">name</span>: <span class="st">&quot;Acme News App&quot;</span>,
        <span class="dt">context</span>: {
            <span class="dt">sessionId</span>: <span class="kw">myApp</span>.<span class="fu">sessionId</span>,
            <span class="dt">someArray</span>: [value1,value2]
        }
    }
];</code></pre>
<p>When <code>F2.registerApps()</code> is called, the <code>appConfig</code> is serialized and posted to the app's manifest URL. The serialized object converts to <a href="./sdk/classes/F2.html#methods-stringify">stringified JSON</a>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{<span class="st">&quot;appId&quot;</span>:<span class="st">&quot;com_acmecorp_news&quot;</span>,<span class="st">&quot;description&quot;</span>:<span class="st">&quot;Acme Corp News&quot;</span>,<span class="st">&quot;manifestUrl&quot;</span>:<span class="st">&quot;http://www.acme.com/apps/news-manifest.js&quot;</span>,<span class="st">&quot;name&quot;</span>:<span class="st">&quot;Acme News App&quot;</span>,<span class="st">&quot;context&quot;</span>:{<span class="st">&quot;sessionId&quot;</span>:<span class="st">&quot;12345&quot;</span>, <span class="st">&quot;someArray&quot;</span>:[<span class="st">&quot;value1&quot;</span>,<span class="st">&quot;value2&quot;</span>]}}</code></pre>
<p>The <code>appConfig</code> object is sent to the server using the <code>params</code> querystring name as shown in the example below. This is the complete app manifest request sent by <code>F2.registerApps()</code> with the <code>appConfig</code> URL-encoded, of course:</p>
<pre class="sourceCode html"><code class="sourceCode html">http://www.acme.com/apps/news-manifest.js?params=%7B%22appId%22%3A%22com_acmecorp_news%22%2C%22description%22%3A%22Acme%20Corp%20News%22%2C%22manifestUrl%22%3A%22http%3A%2F%2Fwww.acme.com%2Fapps%2Fnews-manifest.js%22%2C%22name%22%3A%22Acme%20News%20App%22%2C%22context%22%3A%7B%22sessionId%22%3A%2212345%22%2C%20%22someArray%22%3A%5B%22value1%22%2C%22value2%22%5D%7D%7D</code></pre>
<p>This demonstrates complete flexibility of passing arbitrary context values from the container to any F2 app.</p>
</section>
<section class="level3" id="app-to-container-context">
<h3>App-to-Container Context</h3>
<p>In this example, your app emits an event indicating a user is looking at a different stock ticker <em>within your app</em>. Using <code>F2.Events.emit()</code> in your code, your app broadcasts the new symbol. As with container-to-app context passing, the <code>F2.Events.emit()</code> method accepts two arguments: the event name and an optional data object.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">APP</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;MSFT&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Microsoft, Inc.&quot;</span> 
    }
);</code></pre>
<p>The container would need to listen to your apps' broadcasted <code>F2.Constants.Events.APP_SYMBOL_CHANGE</code> event using code like this:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">APP</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;The symbol was changed to &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span>);
    }
);</code></pre>
<p><span class="label">Note</span> For a full list of support event types, browse to the SDK for <a href="./sdk/classes/F2.Constants.Events.html">F2.Constants.Events</a>.</p>
</section>
<section class="level3" id="app-to-app-context">
<h3>App-to-App Context</h3>
<p>Apps can also pass context between apps. If there are two or more apps on a container with similar context and the ability to receive messages (yes, through event listeners, context receiving is opt-in), apps can communicate with each other. To communicate with another app, each app will have to know the event name along with the type of data being passed. Let's take a look.</p>
<p>Within &quot;App 1&quot;, context is <em>sent</em> using <code>F2.Events.emit()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="st">&quot;buy_stock&quot;</span>, <span class="co">//custom event name</span>
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;GOOG&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Google Inc&quot;</span>,
        <span class="dt">price</span>: <span class="fl">682.68</span>,
        <span class="dt">isAvailableToPurchase</span>: <span class="kw">true</span>,
        <span class="dt">orderType</span>: <span class="st">&quot;Market Order&quot;</span>
    }
);</code></pre>
<p>Within &quot;App 2&quot;, context is <em>received</em> using <code>F2.Events.on()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="st">&quot;buy_stock&quot;</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">if</span> (<span class="kw">data</span>.<span class="fu">isAvailableToPurchase</span>){
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;Trade ticket order for &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span> + <span class="st">&quot; at $&quot;</span> + <span class="kw">data</span>.<span class="fu">price</span>);
        } <span class="kw">else</span> {
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;This stock is not available for purchase.&quot;</span>)
        }
    }
);</code></pre>
</section>
<section class="level3" id="more-complex-context">
<h3>More Complex Context</h3>
<p>The examples above demonstrate <em>simple</em> Context objects. In the event more complex data and/or data types are needed, F2 Context can support any JavaScript object—a string, a number, a function, an array or an object.</p>
<p>This is an example Context object demonstrating arbitrary JavaScript objects:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="st">&quot;example_event&quot;</span>, <span class="co">//custom event name</span>
    { 
        <span class="co">//number</span>
        <span class="dt">price</span>: <span class="dv">100</span>,
        <span class="co">//string</span>
        <span class="dt">name</span>: <span class="ch">&#39;John Smith&#39;</span>,
        <span class="co">//function</span>
        <span class="dt">callback</span>: <span class="kw">function</span>(){
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="ch">&#39;Callback!&#39;</span>);
        },
        <span class="co">//array</span>
        <span class="dt">watchlist</span>: [<span class="ch">&#39;AAPL&#39;</span>,<span class="ch">&#39;MSFT&#39;</span>,<span class="ch">&#39;GE&#39;</span>],
        <span class="co">//object</span>
        <span class="dt">userInfo</span>: {
            <span class="dt">name</span>: <span class="ch">&#39;John Smith&#39;</span>,
            <span class="dt">title</span>: <span class="ch">&#39;Managing Director&#39;</span>,
            <span class="dt">groups</span>: [<span class="ch">&#39;Alpha&#39;</span>,<span class="ch">&#39;Beta&#39;</span>],
            <span class="dt">sessionId</span>: <span class="dv">1234567890</span>
        }
    }
);</code></pre>
<p>If two apps want to communicate data for populating a trade ticket <em>and</em> execute a <code>callback</code>, <a href="#scripts-1">appclass.js</a> code might look like this:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="st">&quot;buy_stock&quot;</span>, <span class="co">//custom event name</span>
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;GOOG&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Google Inc&quot;</span>,
        <span class="dt">price</span>: <span class="fl">682.68</span>,
        <span class="dt">isAvailableToPurchase</span>: <span class="kw">true</span>,
        <span class="dt">orderType</span>: <span class="st">&quot;Market Order&quot;</span>,
        <span class="co">//define callback</span>
        <span class="dt">callback</span>: <span class="kw">function</span>(data){
            alert(<span class="ch">&#39;Trade ticket populated&#39;</span>);
        }
    }
);</code></pre>
<p>The F2 app listening for the <code>buy_stock</code> event would fire the <code>callback</code> function.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="st">&quot;buy_stock&quot;</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;Trade ticket order for &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span> + <span class="st">&quot; at $&quot;</span> + <span class="kw">data</span>.<span class="fu">price</span>);
        <span class="co">//..populate the trade ticket...</span>
        <span class="co">//fire the callback</span>
        <span class="kw">if</span> (<span class="kw">typeof</span> <span class="kw">data</span>.<span class="fu">callback</span> === <span class="ch">&#39;function&#39;</span>){
            <span class="kw">data</span>.<span class="fu">callback</span>();
        }
    }
);</code></pre>
</section>
<section class="level3" id="types-of-context">
<h3>Types of Context</h3>
<p>Context is a term used to describe the state of an F2 container and its apps. At the same time, context is also the information passed from <a href="#container-to-app-context">Container-to-App</a> or from <a href="#app-to-app-context">App-to-App</a> or from <a href="#app-to-container-context">App-to-Container</a>. In the examples shown above, two types of context were shown: symbol and trade ticket context. It is important to realize <a href="f2js.html">F2.js</a> allows client-side messaging between third parties using a collection of arbitrary name-value pairs. This provides the utmost flexibility and affords container providers the option to define context within their container.</p>
<section class="level4" id="universal-f2-instrument-id">
<h4>Universal F2 Instrument ID</h4>
<p>Said another way, while <code>{ symbol:&quot;AAPL&quot;, name: &quot;Apple, Inc&quot; }</code> can be used to communicate symbol context, developers could also use <code>{ symbol: &quot;123456789&quot; }</code> to identify Apple, Inc. The latter is more likely given not all apps would programmatically understand <code>AAPL</code> but—given symbol lookup services—would understand <code>123456789</code> as the universal <em>F2</em> identifier for Apple, Inc. It is clear Container and App Developers alike would prefer to communicate with a guaranteed-to-never-change universal ID for all instrument types across all asset classes. <em>Further details will be forthcoming as the F2 specification evolves.</em></p>
<hr>
</section>
</section>
</section>
<section class="level2" id="app-integration">
<h2>App Integration</h2>
<p>The process of loading apps on a container happens through a method called <code>F2.registerApps()</code>. The Container Developer must call <a href="./sdk/classes/F2.html">this method</a>—which accepts two arguments, one required, one optional— after <code>F2.init()</code> is called. If this method isn't called, no apps can be loaded on the container.</p>
<p>The two arguments provided to <code>registerApps()</code> are an array of <code>AppConfig</code> objects and, optionally, an array of <code>AppManifest</code> objects. As F2.js parses each <code>AppConfig</code>, the apps are validated, hydrated with some additional properties, and saved in F2 memory on the container.</p>
<p>Regardless of where the container's <a href="#app-configs">AppConfig</a> comes from, integrating apps is a simple process. For the purposes of this example, we will use an Acme Corp news app.</p>
<p>Let's look at some container code.</p>
<section class="level3" id="static-app-configuration">
<h3>Static App Configuration</h3>
<p>First, we define the <code>AppConfigs</code> in a <em>hard-coded</em> <code>_appConfigs</code> array. Secondly, when the document is ready, we call <code>F2.init()</code> and subsequently <code>F2.registerApps()</code> with the single argument.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">//define app config</span>
<span class="kw">var</span> _appConfigs = [
    {
        <span class="dt">appId</span>: <span class="st">&quot;com_acmecorp_news&quot;</span>,
        <span class="dt">description</span>: <span class="st">&quot;Acme Corp News&quot;</span>,
        <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.acme.com/apps/news-manifest.js&quot;</span>,
        <span class="dt">name</span>: <span class="st">&quot;Acme News App&quot;</span>
    }
];

$(<span class="kw">document</span>).<span class="fu">ready</span>(<span class="kw">function</span>(){

    <span class="co">//init F2 container</span>
    <span class="kw">F2</span>.<span class="fu">init</span>({
        <span class="co">//define ContainerConfig properties</span>
        <span class="dt">appRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">afterAppRender</span>: <span class="kw">function</span>(appConfig){ ... },

        <span class="co">//setup UI</span>
        <span class="dt">UI</span>:{
            <span class="dt">Mask</span>:{
                <span class="dt">loadingIcon</span>:<span class="ch">&#39;./img/spinner.gif&#39;</span>,
                <span class="dt">backgroundColor</span>: <span class="ch">&#39;#fff&#39;</span>,
                <span class="dt">opacity</span>: <span class="fl">0.5</span>
            }
        }
    });

    <span class="co">//load apps</span>
    <span class="kw">F2</span>.<span class="fu">registerApps</span>(_appConfigs);

});</code></pre>
<p>This javascript code will insert the Acme Corp news app into the container's DOM, provided the <code>appRender</code> method is <a href="#container-config">configured correctly</a>.</p>
</section>
<section class="level3" id="dynamic-app-configuration">
<h3>Dynamic App Configuration</h3>
<p>Alternatively, <code>AppConfigs</code> could live in a database—eventually the <a href="index.html#the-store">F2 Store</a>—at which time container developers could provide their containers with <code>AppManifests</code> instead of relying on each <code>AppConfig.manifestUrl</code> property to be retrieved and parsed at run time.</p>
<p>Such an implementation would require the container developer to make a HTTP call to a Store web service to retrieve <code>AppConfigs</code> and <code>AppManifests</code>. You are already familiar with <a href="#app-configs">what the <code>AppConfig</code> looks like</a>, but if you aren't sure what an <code>AppManifest</code> looks like, take note of this empty manifest.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="st">&quot;inlineScripts&quot;</span>:[],  
    <span class="st">&quot;scripts&quot;</span>:[],    
    <span class="st">&quot;styles&quot;</span>:[],     
    <span class="st">&quot;apps&quot;</span>:[{
            <span class="st">&quot;data&quot;</span>:{},
            <span class="st">&quot;html&quot;</span>:<span class="st">&quot;&quot;</span>,
            <span class="st">&quot;status&quot;</span>:<span class="st">&quot;&quot;</span>
    }]
}</code></pre>
<p><span class="label">Note</span> <a href="app-development.html#app-manifest">Read more about the AppManifest</a>.</p>
<p>An example of a container making a request to the F2 Store for <code>AppConfigs</code> and <code>AppManifests</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">(<span class="kw">function</span>(){
    
    <span class="kw">var</span> _appConfigs = [], _appManifests = [];

    <span class="co">//make request to Store web service</span>
    <span class="kw">var</span> $req = $.<span class="fu">ajax</span>({
        <span class="dt">url</span>: <span class="ch">&#39;https://store.openf2.org/getApps&#39;</span>,
        <span class="dt">dataType</span>: <span class="ch">&#39;jsonp&#39;</span>
    });

    <span class="co">//parse successful response</span>
    $<span class="kw">req</span>.<span class="fu">done</span>(<span class="kw">function</span>(jqxhr,txtStatus){
        jqxhr = jqxhr || {};
        <span class="kw">if</span> (<span class="kw">jqxhr</span>.<span class="fu">status</span> == <span class="st">&quot;good&quot;</span>){
            _appConfigs = <span class="kw">jqxhr</span>.<span class="fu">appConfigs</span> || [];
            _appManifests = <span class="kw">jqxhr</span>.<span class="fu">appManifests</span> || [];
            <span class="co">//load</span>
            loadContainer();
        } <span class="kw">else</span> {
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;Store web service did not do something &#39;good&#39;.&quot;</span>, jqxhr, txtStatus);
        }
    });

    <span class="co">//handle errors</span>
    $<span class="kw">req</span>.<span class="fu">fail</span>(<span class="kw">function</span>(jqxhr,txtStatus){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;Store web service failed.&quot;</span>, jqxhr, txtStatus);
    });

    <span class="co">//wrap this up so we can call it in $req.done()</span>
    <span class="kw">var</span> loadContainer = <span class="kw">function</span>(){
        $(<span class="kw">document</span>).<span class="fu">ready</span>(<span class="kw">function</span>(){
            <span class="co">//init F2 container</span>
            <span class="kw">F2</span>.<span class="fu">init</span>({
                <span class="co">//define ContainerConfig properties</span>
                <span class="dt">appRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
                <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
                <span class="dt">afterAppRender</span>: <span class="kw">function</span>(appConfig){ ... },

                <span class="co">//setup UI</span>
                <span class="dt">UI</span>:{
                    <span class="dt">Mask</span>:{
                        <span class="dt">loadingIcon</span>:<span class="ch">&#39;./img/spinner.gif&#39;</span>,
                        <span class="dt">backgroundColor</span>: <span class="ch">&#39;#fff&#39;</span>,
                        <span class="dt">opacity</span>: <span class="fl">0.5</span>
                    }
                }
            });

            <span class="co">//load apps</span>
            <span class="kw">F2</span>.<span class="fu">registerApps</span>(_appConfigs, _appManifests);

        });
    }<span class="co">//loadContainer</span>
    
})();</code></pre>
<p><span class="label label-important">Important</span> The <code>_appConfigs</code> and <code>_appManifests</code> arrays must be of equal length, and the object at each index must be a parallel reference. This means the <code>AppConfig</code> and <code>AppManifest</code> for Acme Corp's news app must be in <code>_appConfigs[0]</code> and <code>_appManifests[0]</code>.</p>
<p>There are numerous benefits to dynamic app configuration, most notably performance and security. In the dynamic model, <code>AppManifests</code> have already been requested and loaded before a user opens the container reducing the overall number of outbound HTTP requests. Security is improved because Container Developers have the opportunity to parse and scrub <code>AppManifest</code> contents before F2.js injects markup in the <code>AppManifest.html</code> property into the container DOM.</p>
<hr>
</section>
</section>
<section class="level2" id="secure-apps">
<h2>Secure Apps</h2>
<p>Security is a fundamental requirement of any F2 container and many F2 apps. With that in mind, the integration of secure apps on a container requires more attention and effort. The process of <a href="#app-integration">app integration</a> remains largely the same for integrating <em>secure</em> apps with one significant addition: a <em>second</em> container.</p>
<p>To support a secured container environment, one of the <a href="index.html#choices">choices</a> made when writing this specification was the inclusion of an open-source cross-domain in-browser secure messaging library. For this, F2 relies on <a href="https://github.com/oyvindkinsey/easyXDM">easyXDM</a>. EasyXDM helps front-end developers safely work around the <a href="https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript">Same Origin Policy</a> using browser-supported techniques without compromising the user experience. For all browsers, the easyXDM transport stack offers bi-directionality, reliability, queueing and sender-verification.</p>
<section class="level3" id="container-config-1">
<h3>Container Config</h3>
<p>The process of <a href="#container-config">configuring an F2 container</a> to be secure is identical to that of an unsecure container. As such, every container must be setup using <code>ContainerConfig</code> and the <a href="../docs/sdk/classes/F2.ContainerConfig.html">methods available</a>.</p>
<p>In the secure container's <code>$(document).ready()</code>, add the <code>F2.init()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">$(<span class="kw">document</span>).<span class="fu">ready</span>(<span class="kw">function</span>(){
    <span class="kw">F2</span>.<span class="fu">init</span>({
        <span class="co">//define ContainerConfig properties</span>
        <span class="dt">appRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">afterAppRender</span>: <span class="kw">function</span>(appConfig){ ... }
    });
});</code></pre>
<p>For secure containers, an additional property must be set on the <code>ContainerConfig</code> within <code>F2.init()</code>. Assuiming the container is hosted at <code>https://www.domain.com/container</code>, the following config would be appropriate:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">$(<span class="kw">document</span>).<span class="fu">ready</span>(<span class="kw">function</span>(){
    <span class="kw">F2</span>.<span class="fu">init</span>({
        <span class="co">//define ContainerConfig properties</span>
        <span class="dt">appRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">beforeAppRender</span>: <span class="kw">function</span>(appConfig, html){ ... },
        <span class="dt">afterAppRender</span>: <span class="kw">function</span>(appConfig){ ... },
        <span class="dt">secureAppPagePath</span>: <span class="st">&quot;https://secure.domain.com/container&quot;</span> <span class="co">//define secure page path</span>
    });
});</code></pre>
<p>This <code>secureAppPagePath</code> property allows the container to specify which page is used when loading secure apps. To guarantee security, the page <strong>must reside on a different domain</strong> than the parent container.</p>
<p><span class="label label-important">Important</span> Therefore Container Developers need two containers: one non-secure (parent), one secure (child). The parent container can follow the <a href="#basic-container-template">basic template</a> style and must call <code>F2.init()</code> and <code>F2.registerApps()</code> appropriately. Per the above, it must also define the <code>secureAppPagePath</code> property in its <code>ContainerConfig</code>. To see a working container, <a href="https://github.com/OpenF2/F2">browse to the examples in the project repo on GitHub</a>.</p>
<p>Since it will be loaded in an iframe and like its parent, the secure child container must also include a <a href="f2js-sdk.html">copy of the F2.js SDK</a>. Additionally, it must also call <code>F2.init()</code> with a unique <code>ContainerConfig</code>.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2</span>.<span class="fu">init</span>({
    <span class="dt">appRender</span>:<span class="kw">function</span>(appConfig, html) {
        <span class="kw">return</span> [
            <span class="ch">&#39;&lt;div class=&quot;span4&quot;&gt;&#39;</span>,
                html,
            <span class="ch">&#39;&lt;/div&gt;&#39;</span>
        ].<span class="fu">join</span>(<span class="ch">&#39;&#39;</span>);
    },
    <span class="dt">afterAppRender</span>:<span class="kw">function</span>(appConfig, html) { ... },

    <span class="co">//now set this property to true to tell F2 this is the secure child frame.</span>
    <span class="dt">isSecureAppPage</span>:<span class="kw">true</span>
});</code></pre>
<p>When the parent container calls <code>registerApps()</code>, F2 looks at each <code>AppConfig</code> for the <code>isSecure</code> bool. If the property is set to <code>true</code>, F2 inserts the secure app inside an iframe and instantiates the easyXDM transport stack. To see a working <em>secure</em> container, <a href="https://github.com/OpenF2/F2">browse to the examples in the project repo on GitHub</a>.</p>
<hr>
</section>
</section>
<section class="level2" id="utilities">
<h2>Utilities</h2>
<p>The <a href="f2js-sdk.html">F2.js JavaScript SDK</a> provides utility methods for Container Developers. These are available within the <code>F2</code> namespace and complete details are in the <a href="./sdk/classes/F2.html">Reference documentation</a>.</p>
<hr>
</section>
<section class="level2" id="f2-ui">
<h2>F2 UI</h2>
<p>There are some utility methods provided within F2.js in the <code>UI</code> namespace. These helpers are for controlling layout, showing (or hiding) loading spinners, modals, managing views within apps, and more. To see which <code>UI</code> helpers are available to App Developers, <a href="app-development.html#f2-ui">read about F2.UI for apps</a>.</p>
<p>For Container Developers, the use of F2's <code>UI</code> is more than likely limited to customizing the design aesthetic (CSS) and <a href="#f2-ui-mask">configuring the UI properties</a>.</p>
<p>For complete details on <code>F2.UI</code>, <a href="./sdk/classes/F2.UI.html">browse to the SDK docs</a>.</p>
<hr>
</section>
<section class="level2" id="entitlements">
<h2>Entitlements</h2>
<p>User or content entitlements are the responsibility of the App developer. Many apps will need to be decoupled from the content that they need. This could include apps like research aggregation, news filtering, streaming market data, etc. Similarly to how companies build their own websites today with their own authentication and access (or content) entitlements, F2 apps are no different.</p>
<p><em>Further details around app entitlements will be forthcoming as the F2 specification evolves.</em></p>
<hr>
</section>
<section class="level2" id="single-sign-on">
<h2>Single Sign-On</h2>
<p>Single sign-on (SSO) will be a shared responsibility between the Container and App Developer. In some cases, containers will want all its apps to be authenticated seamlessly for users, and that will have to be negotiated between Container and App Developers. For the purposes of this documentation, it is assumed Container Developers will build and host authentication for access to their container(s).</p>
<p>Once a user is authenticated on the container, how is the user then authenticated with all of the apps? <a href="#using-encrypted-urls">Encrypted URLs</a>.*</p>
<p><span class="label">Note</span> The Container Developer is free to utilize any app authentication method they deem fit. Container Developers and App Developers will need to work together to finalize the authentication details.</p>
<section class="level3" id="using-encrypted-urls">
<h3>Using Encrypted URLs</h3>
<p>Implementing SSO using encrypted URLs is a simple and straight-forward authentication mechanism for securing cross-domain multi-provider apps. To guarantee security between the Container and App Developers, secure API contracts must be negotiated. This includes, but is not limited to, the choice of cryptographic algorithm (such as <code>AES</code>) and the exchange of public keys.</p>
<p>When the Container Developer calls <code>F2.registerApps()</code>, custom logic should be added to append encrypted user credentials—on a need-to-know basis—to <em>each app</em> requiring authentication.</p>
</section>
<section class="level3" id="considerations">
<h3>Considerations</h3>
<p>Authentication is a critical part of any container-app relationship. There are a plethora of SSO implementations and there are many considerations for both Container and App Developers alike.</p>
<p><em>Further details around container and app single sign-on will be forthcoming as the F2 specification evolves.</em></p>
<hr>
</section>
</section>
			</div><!--/#docs-->
		</div><!--/span9-->
	</div><!--/row-->

	<hr>

	<footer>
		<p class="pull-left"><small><strong>F2&nbsp;&nbsp;|&nbsp;&nbsp;The Open Financial Framework</strong><br><a href="mailto:info@openf2.org">info@openf2.org</a><br>Specification 1.2.0, published 13 March 2013</small></p>
		<p class="pull-right"><small>F2 is maintained by <a href="http://www.markitondemand.com/">Markit On Demand</a> on <a href="https://github.com/OpenF2/F2">GitHub</a>.<br>Code licensed under the <a href="https://github.com/OpenF2/F2#copyright-and-license">MIT License</a>.<br> Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</small></p>
	</footer>

</div><!--/.container-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="./js/bootstrap.min.2.3.0.js"></script>
<script src="./js/prettify.js"></script>
<script src="./js/f2.js?1.2.0"></script>
<script src="./js/docs.js?1.2.0"></script>
<script>F2.extend('gitbranch', (function(){ return '1.2-wip'; }));</script>
</body>
</html>