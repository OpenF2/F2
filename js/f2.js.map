{"version":3,"sources":["webpack://F2/webpack/universalModuleDefinition","webpack://F2/./node_modules/domify/index.js","webpack://F2/./node_modules/eventemitter2/lib/eventemitter2.js","webpack://F2/./node_modules/fetch-jsonp/build/fetch-jsonp.js","webpack://F2/./node_modules/lodash.clonedeep/index.js","webpack://F2/./src/appHandlers.js","webpack://F2/./src/apps.js","webpack://F2/./src/classes/appConfig.js","webpack://F2/./src/classes/index.js","webpack://F2/./src/classes/app.js","webpack://F2/./src/classes/appContent.js","webpack://F2/./src/classes/appManifest.js","webpack://F2/./src/classes/containerConfig.js","webpack://F2/./src/constants/appHandlers.js","webpack://F2/./src/constants/index.js","webpack://F2/./src/constants/css.js","webpack://F2/./src/constants/events.js","webpack://F2/./src/container.js","webpack://F2/./src/events.js","webpack://F2/./src/utils/dom.js","webpack://F2/./src/utils/uri.js","webpack://F2/./src/utils/index.js","webpack://F2/webpack/bootstrap","webpack://F2/webpack/runtime/compat get default export","webpack://F2/webpack/runtime/define property getters","webpack://F2/webpack/runtime/global","webpack://F2/webpack/runtime/hasOwnProperty shorthand","webpack://F2/webpack/runtime/node module decorator","webpack://F2/./src/autoload.js","webpack://F2/./src/index.js"],"names":["root","factory","exports","module","define","amd","self","html","doc","TypeError","document","m","exec","createTextNode","replace","tag","el","createElement","innerHTML","removeChild","lastChild","wrap","Object","prototype","hasOwnProperty","call","map","_default","depth","prefix","suffix","firstChild","fragment","createDocumentFragment","appendChild","bugTestDiv","innerHTMLBug","getElementsByTagName","length","undefined","legend","tr","col","td","th","option","optgroup","thead","tbody","colgroup","caption","tfoot","polyline","ellipse","polygon","circle","text","line","path","rect","g","isArray","Array","obj","toString","nextTickSupported","process","nextTick","symbolsSupported","Symbol","reflectSupported","Reflect","_setImmediate","setImmediate","setTimeout","ownKeys","arr","getOwnPropertyNames","push","apply","getOwnPropertySymbols","keys","init","this","_events","_conf","configure","conf","delimiter","maxListeners","_maxListeners","wildcard","newListener","_newListener","removeListener","_removeListener","verboseMemoryLeak","ignoreErrors","listenerTree","logPossibleMemoryLeak","count","eventName","errorMsg","emitWarning","e","Error","name","emitter","console","error","trace","toArray","a","b","c","n","arguments","toObject","values","len","valuesCount","value","i","TargetObserver","target","options","on","off","_emitter","_target","_listeners","_listenersCount","addEventListener","removeEventListener","addListener","_on","_off","_observers","resolveOptions","schema","reducers","allowUnknown","computedOptions","assign","reducer","reject","reason","constructorReducer","makeTypeReducer","types","message","join","firstType","secondType","v","kind","subscribe","event","localEvent","observer","listeners","handler","args","eventObj","data","original","result","emit","concat","_onNewListener","_event","_onRemoveListener","hasListeners","unsubscribe","events","clearRefs","index","findTargetIndex","splice","functionReducer","objectFunctionReducer","makeCancelablePromise","Promise","executor","isCancelable","callbacks","subscriptionClosed","timer","promise","resolve","onCancel","cleanup","clearTimeout","timeout","overload","Number","isFinite","cancel","_resolve","_reject","err","cb","code","observers","searchListenerTree","handlers","type","tree","typeLength","ns","l","j","dl","indexOf","slice","branch","xTree","xxTree","isolatedBranch","endReached","branches","currentType","nextType","growListenerTree","listener","prepend","unshift","warned","collectTreeEvents","asArray","branchName","isArrayPath","recursivelyGarbageCollect","key","flag","Listener","setupListener","promisify","async","objectify","_listener","_origin","constructor","context","then","_async","EventEmitter","EventEmitter2","listenTo","listen","isSingleReducer","split","stopListeningTo","matched","setMaxListeners","getMaxListeners","once","fn","_once","prependOnceListener","_many","many","ttl","prependMany","_all","containsSymbol","al","emitAsync","promises","all","prependListener","onAny","_onAny","prependAny","temp","returnValue","leafs","iLeaf","leaf","position","offAny","fns","removeAllListeners","allListeners","eventNames","nsAsArray","listenerCount","listenersAny","waitFor","filter","handleError","defineProperties","defaultMaxListeners","get","set","isNaN","enumerable","errorListener","eventListener","writable","configurable","defaultOptions","generateCallbackFunction","Date","now","Math","ceil","random","clearFunction","functionName","window","removeScript","scriptId","script","getElementById","_url","url","jsonpCallback","timeoutId","callbackFunction","jsonpCallbackFunction","response","ok","json","jsonpScript","setAttribute","charset","id","onerror","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","Function","freeExports","nodeType","freeModule","moduleExports","addMapEntry","pair","addSetEntry","add","arrayReduce","array","iteratee","accumulator","initAccum","isHostObject","mapToArray","size","forEach","overArg","func","transform","arg","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","RegExp","Buffer","Uint8Array","getPrototype","getPrototypeOf","objectCreate","create","propertyIsEnumerable","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Map","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","clear","entry","ListCache","MapCache","Stack","__data__","assignValue","object","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","input","initCloneArray","source","copyArray","getTag","isFunc","buffer","copy","cloneBuffer","isPrototype","proto","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","symbol","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","initCloneByTag","stacked","props","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","arrayBuffer","newValue","getMapData","isKeyable","getValue","isFunction","test","baseIsNative","has","pop","cache","pairs","LARGE_ARRAY_SIZE","isIndex","other","ArrayBuffer","ctorString","isArrayLike","isLength","inherited","isObjectLike","isArrayLikeObject","isArguments","baseTimes","String","skipIndexes","arrayLikeKeys","baseKeys","_ct","_f2t","_handlerCollection","appManifestRequestFail","appCreateRoot","appRenderBefore","appDestroyBefore","appRenderAfter","appDestroyAfter","appRender","appDestroy","appScriptLoadFailed","_defaultMethods","appConfig","appHtml","body","appInstance","app","destroy","config","appId","parentNode","_validateToken","sToken","getToken","__f2GetToken","__trigger","token","eventKey","passableArgs","iCounter","hcl","domNode","func_or_element","sNamespace","arData","bDomNodeAppropriate","namespace","_createHandler","currentEventKey","toLowerCase","eventCollection","newEvents","ec","currentEventHandler","newHandlerCollection","hc","currentHandler","_removeHandler","App","appContent","AppConfig","enableBatchRequests","height","instanceId","containerLocale","localeSupport","manifestUrl","maxWidth","minGridSize","minWidth","AppContent","status","AppManifest","apps","inlineScripts","scripts","styles","ContainerConfig","debugMode","locale","scriptErrorTimeout","xhr","dataType","appConfigs","loadScripts","inlines","callback","loadStyles","AppHandlers","APP_MANIFEST_REQUEST_FAIL","APP_CREATE_ROOT","APP_RENDER_BEFORE","APP_RENDER","APP_RENDER_AFTER","APP_DESTROY_BEFORE","APP_DESTROY","APP_DESTROY_AFTER","APP_SCRIPT_LOAD_FAILED","AppStatus","ERROR","SUCCESS","Css","APP","APP_CONTAINER","Events","APP_SCRIPTS_LOADED","APP_SYMBOL_CHANGE","APP_WIDTH_CHANGE","CONTAINER_SYMBOL_CHANGE","CONTAINER_WIDTH_CHANGE","CONTAINER_LOCALE_CHANGE","JSONP_CALLBACK","_apps","_config","_sAppHandlerToken","_loadingScripts","_inArray","_createAppConfig","_getAppConfigFromElement","node","getAttribute","hasAttribute","contextJson","warn","_hasNonTextChildNodes","hasNodes","hasChildNodes","childNodes","_hydrateContainerConfig","containerConfig","_initContainerEvents","resizeTimeout","resizeHandler","_isPlaceholderElement","_isInit","_createAppInstance","_loadApps","appManifest","_findExistingScripts","querySelectorAll","src","_findExistingStyles","_loadStyles","existingStyles","filteredStyles","stylesFragment","useCreateStyleSheet","createStyleSheet","_loadScripts","existingScripts","loadingScripts","filteredScripts","scriptCount","scriptsLoaded","head","insertBeforeEl","readyStates","loaded","complete","_error","evtData","_checkComplete","_emptyWaitlist","resourceKey","errorEvt","waiting","waitlist","success","resourceUrl","getTime","onload","onreadystatechange","readyState","insertBefore","_loadInlineScripts","loadInlineScripts","eval","exception","elementInDocument","element","_loadHtml","classList","container","childNode","_validateApp","_validateContainerConfig","getContainerState","getContainerLocale","isInit","loadPlaceholders","elements","els","addAll","registerApps","appManifests","haveManifests","appStack","batches","callbackStack","preloaded","req","requests","manifestRequest","requestFunc","successCallback","errorCallback","completeCallback","fetch","fetchFunc","fetchUrl","fetchInputs","method","mode","params","catch","item","removeApp","removeAllApps","timesToListen","isNativeNode","testObject","bIsNode","Node","nodeName","bIsElement","HTMLElement","parse","match","href","protocol","authority","host","hostname","port","pathname","search","hash","toAbsolute","base","charAt","lastIndexOf","output","p","appConfigReplacer","extend","overwrite","parts","parent","prop","guid","S4","substring","isLocalRequest","ajaxLocation","ajaxLocParts","rurl","urlLower","location","log","_logMethod","noop","methods","bind","str","JSON","stringify","replacer","space","version","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","o","defineProperty","globalThis","nmd","paths","children","autoloadEls","documentElement","doScroll","lib","utils","Apps","Constants","F2"],"mappings":"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","file":"f2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"F2\"] = factory();\n\telse\n\t\troot[\"F2\"] = factory();\n})(self, function() {\nreturn ","\n/**\n * Expose `parse`.\n */\n\nmodule.exports = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar innerHTMLBug = false;\nvar bugTestDiv;\nif (typeof document !== 'undefined') {\n  bugTestDiv = document.createElement('div');\n  // Setup\n  bugTestDiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n  // Make sure that link elements get serialized correctly by innerHTML\n  // This requires a wrapper element in IE\n  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;\n  bugTestDiv = undefined;\n}\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([\\w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^\\s+|\\s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = Object.prototype.hasOwnProperty.call(map, tag) ? map[tag] : map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? value.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength && tree._listeners) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n      if (typeof tree._listeners === 'function') {\n        handlers && handlers.push(tree._listeners);\n        return [tree];\n      } else {\n        handlers && handlers.push.apply(handlers, tree._listeners);\n        return [tree];\n      }\n    }\n\n    if (currentType === '*') {\n      //\n      // If the event emitted is '*' at this part\n      // or there is a concrete match at this patch\n      //\n      branches= ownKeys(tree);\n      n= branches.length;\n      while(n-->0){\n        branch= branches[n];\n        if (branch !== '_listeners') {\n          _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n          if(_listeners){\n            if(listeners){\n              listeners.push.apply(listeners, _listeners);\n            }else{\n              listeners = _listeners;\n            }\n          }\n        }\n      }\n      return listeners;\n    } else if (currentType === '**') {\n      endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n      if (endReached && tree._listeners) {\n        // The next element has a _listeners, add it to the handlers.\n        listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n      }\n\n      branches= ownKeys(tree);\n      n= branches.length;\n      while(n-->0){\n        branch= branches[n];\n        if (branch !== '_listeners') {\n          if (branch === '*' || branch === '**') {\n            if (tree[branch]._listeners && !endReached) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n              if(_listeners){\n                if(listeners){\n                  listeners.push.apply(listeners, _listeners);\n                }else{\n                  listeners = _listeners;\n                }\n              }\n            }\n            _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n          } else if (branch === nextType) {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n          } else {\n            // No match on this one, shift into the tree but not in the type array.\n            _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n          }\n          if(_listeners){\n            if(listeners){\n              listeners.push.apply(listeners, _listeners);\n            }else{\n              listeners = _listeners;\n            }\n          }\n        }\n      }\n      return listeners;\n    }else if (tree[currentType]) {\n      listeners= searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n","(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout);\n\n      // Caught if got 404/500\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","import dom from './utils/dom';\nimport domify from 'domify';\nimport utils from './utils';\n\n// the hidden token that we will check against every time someone tries to add, remove, fire handler\nvar _ct = utils.guid();\nvar _f2t = utils.guid();\n\nvar _handlerCollection = {\n\tappManifestRequestFail: [],\n\tappCreateRoot: [],\n\tappRenderBefore: [],\n\tappDestroyBefore: [],\n\tappRenderAfter: [],\n\tappDestroyAfter: [],\n\tappRender: [],\n\tappDestroy: [],\n\tappScriptLoadFailed: []\n};\n\nvar _defaultMethods = {\n\tappRender: function (appConfig, appHtml) {\n\t\t// if no app root is defined use the app's outer most node\n\t\tif (!dom.isNativeNode(appConfig.root)) {\n\t\t\tappConfig.root = domify(appHtml);\n\t\t} else {\n\t\t\t// append the app html to the root\n\t\t\tappConfig.root.appendChild(domify(appHtml));\n\t\t}\n\n\t\t// append the root to the body by default.\n\t\tdocument.body.appendChild(appConfig.root);\n\t},\n\tappDestroy: function (appInstance) {\n\t\t// call the apps destroy method, if it has one\n\t\tif (\n\t\t\tappInstance &&\n\t\t\tappInstance.app &&\n\t\t\tappInstance.app.destroy &&\n\t\t\ttypeof appInstance.app.destroy == 'function'\n\t\t) {\n\t\t\tappInstance.app.destroy();\n\t\t}\n\t\t// warn the Container and App Developer that even though they have a destroy method it hasn't been\n\t\telse if (appInstance && appInstance.app && appInstance.app.destroy) {\n\t\t\tutils.log(\n\t\t\t\tappInstance.config.appId +\n\t\t\t\t\t' has a destroy property, but destroy is not of type function and as such will not be executed.'\n\t\t\t);\n\t\t}\n\n\t\t// remove the root\n\t\tif (appInstance.config.root && appInstance.config.root.parentNode) {\n\t\t\tappInstance.config.root.parentNode.removeChild(appInstance.config.root);\n\t\t}\n\t}\n};\n\nvar _createHandler = function (\n\ttoken,\n\tsNamespace,\n\tfunc_or_element,\n\tbDomNodeAppropriate\n) {\n\t// will throw an exception and stop execution if the token is invalid\n\t_validateToken(token);\n\n\t// create handler structure. Not all arguments properties will be populated/used.\n\tvar handler = {\n\t\tfunc: func_or_element || null,\n\t\tnamespace: sNamespace,\n\t\tdomNode: dom.isNativeNode(func_or_element) ? func_or_element : null\n\t};\n\n\tif (!handler.func && !handler.domNode) {\n\t\tthrow 'Invalid or null argument passed. Handler will not be added to collection. A valid dom element or callback function is required.';\n\t}\n\n\tif (handler.domNode && !bDomNodeAppropriate) {\n\t\tthrow 'Invalid argument passed. Handler will not be added to collection. A callback function is required for this event type.';\n\t}\n\n\treturn handler;\n};\n\nvar _validateToken = function (sToken) {\n\t// check token against F2 and container\n\tif (_ct != sToken && _f2t != sToken) {\n\t\tthrow 'Invalid token passed. Please verify that you have correctly received and stored token from F2.AppHandlers.getToken().';\n\t}\n};\n\nvar _removeHandler = function (sToken, eventKey, sNamespace) {\n\t// will throw an exception and stop execution if the token is invalid\n\t_validateToken(sToken);\n\n\tif (!sNamespace && !eventKey) {\n\t\treturn;\n\t}\n\t// remove by event key\n\telse if (!sNamespace && eventKey) {\n\t\t_handlerCollection[eventKey] = [];\n\t}\n\t// remove by namespace only\n\telse if (sNamespace && !eventKey) {\n\t\tsNamespace = sNamespace.toLowerCase();\n\n\t\tfor (var currentEventKey in _handlerCollection) {\n\t\t\tvar eventCollection = _handlerCollection[currentEventKey];\n\t\t\tvar newEvents = [];\n\n\t\t\tfor (var i = 0, ec = eventCollection.length; i < ec; i++) {\n\t\t\t\tvar currentEventHandler = eventCollection[i];\n\t\t\t\tif (currentEventHandler) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!currentEventHandler.namespace ||\n\t\t\t\t\t\tcurrentEventHandler.namespace.toLowerCase() != sNamespace\n\t\t\t\t\t) {\n\t\t\t\t\t\tnewEvents.push(currentEventHandler);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\teventCollection = newEvents;\n\t\t}\n\t} else if (sNamespace && _handlerCollection[eventKey]) {\n\t\tsNamespace = sNamespace.toLowerCase();\n\n\t\tvar newHandlerCollection = [];\n\n\t\tfor (\n\t\t\tvar iCounter = 0, hc = _handlerCollection[eventKey].length;\n\t\t\tiCounter < hc;\n\t\t\tiCounter++\n\t\t) {\n\t\t\tvar currentHandler = _handlerCollection[eventKey][iCounter];\n\t\t\tif (currentHandler) {\n\t\t\t\tif (\n\t\t\t\t\t!currentHandler.namespace ||\n\t\t\t\t\tcurrentHandler.namespace.toLowerCase() != sNamespace\n\t\t\t\t) {\n\t\t\t\t\tnewHandlerCollection.push(currentHandler);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_handlerCollection[eventKey] = newHandlerCollection;\n\t}\n};\n\n/**\n * The `AppHandlers` functionality provides Container Developers a higher level of control over configuring app rendering and interaction.\n *\n * ### Order of Execution\n *\n * **App Rendering**\n *\n * 0. {{#crossLink \"F2/registerApps\"}}F2.registerApps(){{/crossLink}} method is called by the Container Developer and the following methods are run for *each* {{#crossLink \"F2.AppConfig\"}}{{/crossLink}} passed.\n * 1. **'appCreateRoot'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_CREATE\\_ROOT*) handlers are fired in the order they were attached.\n * 2. **'appRenderBefore'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_RENDER\\_BEFORE*) handlers are fired in the order they were attached.\n * 3. Each app's `manifestUrl` is requested asynchronously; on success the following methods are fired.\n * 3. **'appRender'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_RENDER*) handlers are fired in the order they were attached.\n * 4. **'appRenderAfter'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_RENDER\\_AFTER*) handlers are fired in the order they were attached.\n *\n *\n * **App Removal**\n\n * 0. {{#crossLink \"F2/removeApp\"}}F2.removeApp(){{/crossLink}} with a specific {{#crossLink \"F2.AppConfig/instanceId \"}}{{/crossLink}} or {{#crossLink \"F2/removeAllApps\"}}F2.removeAllApps(){{/crossLink}} method is called by the Container Developer and the following methods are run.\n * 1. **'appDestroyBefore'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_DESTROY\\_BEFORE*) handlers are fired in the order they were attached.\n * 2. **'appDestroy'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_DESTROY*) handlers are fired in the order they were attached.\n * 3. **'appDestroyAfter'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_DESTROY\\_AFTER*) handlers are fired in the order they were attached.\n *\n * **Error Handling**\n\n * 0. **'appScriptLoadFailed'** (*{{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.APP\\_SCRIPT\\_LOAD\\_FAILED*) handlers are fired in the order they were attached.\n *\n * @class F2.AppHandlers\n */\nexport default {\n\t/**\n\t * Allows Container Developer to retrieve a unique token which must be passed to\n\t * all `on` and `off` methods. This function will self destruct and can only be called\n\t * one time. Container Developers must store the return value inside of a closure.\n\t * @method getToken\n\t **/\n\tgetToken: function () {\n\t\t// delete this method for security that way only the container has access to the token 1 time.\n\t\t// kind of Ethan Hunt-ish, this message will self destruct immediately.\n\t\tdelete this.getToken;\n\t\t// return the token, which we validate against.\n\t\treturn _ct;\n\t},\n\t/**\n\t * Allows F2 to get a token internally. Token is required to call {{#crossLink \"F2.AppHandlers/\\_\\_trigger:method\"}}{{/crossLink}}.\n\t * This function will self destruct to eliminate other sources from using the {{#crossLink \"F2.AppHandlers/\\_\\_trigger:method\"}}{{/crossLink}}\n\t * and additional internal methods.\n\t * @method __f2GetToken\n\t * @private\n\t **/\n\t__f2GetToken: function () {\n\t\t// delete this method for security that way only the F2 internally has access to the token 1 time.\n\t\t// kind of Ethan Hunt-ish, this message will self destruct immediately.\n\t\tdelete this.__f2GetToken;\n\t\t// return the token, which we validate against.\n\t\treturn _f2t;\n\t},\n\t/**\n\t * Allows F2 to trigger specific events internally.\n\t * @method __trigger\n\t * @private\n\t * @chainable\n\t * @param {String} token The token received from {{#crossLink \"F2.AppHandlers/\\_\\_f2GetToken:method\"}}{{/crossLink}}.\n\t * @param {String} eventKey The event to fire. The complete list of event keys is available in {{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.\n\t **/\n\t__trigger: function (\n\t\ttoken,\n\t\teventKey // additional arguments will likely be passed\n\t) {\n\t\t// will throw an exception and stop execution if the token is invalid\n\t\tif (token != _f2t) {\n\t\t\tthrow 'Token passed is invalid. Only F2 is allowed to call F2.AppHandlers.__trigger().';\n\t\t}\n\n\t\tif (_handlerCollection && _handlerCollection[eventKey]) {\n\t\t\t// create a collection of arguments that are safe to pass to the callback.\n\t\t\tvar passableArgs = [];\n\n\t\t\t// populate that collection with all arguments except token and eventKey\n\t\t\tfor (var i = 2, j = arguments.length; i < j; i++) {\n\t\t\t\tpassableArgs.push(arguments[i]);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t_handlerCollection[eventKey].length === 0 &&\n\t\t\t\t_defaultMethods[eventKey]\n\t\t\t) {\n\t\t\t\t_defaultMethods[eventKey].apply(this, passableArgs);\n\t\t\t\treturn this;\n\t\t\t} else if (\n\t\t\t\t_handlerCollection[eventKey].length === 0 &&\n\t\t\t\t!_handlerCollection[eventKey]\n\t\t\t) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// fire all event listeners in the order that they were added.\n\t\t\tfor (\n\t\t\t\tvar iCounter = 0, hcl = _handlerCollection[eventKey].length;\n\t\t\t\tiCounter < hcl;\n\t\t\t\tiCounter++\n\t\t\t) {\n\t\t\t\tvar handler = _handlerCollection[eventKey][iCounter];\n\n\t\t\t\t// appRender where root is already defined\n\t\t\t\tif (\n\t\t\t\t\thandler.domNode &&\n\t\t\t\t\targuments[2] &&\n\t\t\t\t\targuments[2].root &&\n\t\t\t\t\targuments[3]\n\t\t\t\t) {\n\t\t\t\t\targuments[2].root.appendChild(domify(arguments[3]));\n\t\t\t\t\thandler.domNode.appendChild(arguments[2].root);\n\t\t\t\t} else if (\n\t\t\t\t\thandler.domNode &&\n\t\t\t\t\targuments[2] &&\n\t\t\t\t\t!arguments[2].root &&\n\t\t\t\t\targuments[3]\n\t\t\t\t) {\n\t\t\t\t\t// set the root to the actual HTML of the app\n\t\t\t\t\targuments[2].root = domify(arguments[3]);\n\t\t\t\t\t// appends the root to the dom node specified\n\t\t\t\t\thandler.domNode.appendChild(arguments[2].root);\n\t\t\t\t} else {\n\t\t\t\t\thandler.func.apply(this, passableArgs);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow 'Invalid EventKey passed. Check your inputs and try again.';\n\t\t}\n\n\t\treturn this;\n\t},\n\t/**\n\t * Allows Container Developer to easily tell all apps to render in a specific location. Only valid for eventType `appRender`.\n\t * @method on\n\t * @chainable\n\t * @param {String} token The token received from {{#crossLink \"F2.AppHandlers/getToken:method\"}}{{/crossLink}}.\n\t * @param {String} eventKey{.namespace} The event key used to determine which event to attach the listener to. The namespace is useful for removal\n\t * purposes. At this time it does not affect when an event is fired. Complete list of event keys available in\n\t * {{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.\n\t * @params {HTMLElement} element Specific DOM element to which app gets appended.\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\t'appRender',\n\t *\t\tdocument.getElementById('my_app')\n\t *\t);\n\t *\n\t * Or:\n\t * @example\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\t'appRender.myNamespace',\n\t *\t\tdocument.getElementById('my_app')\n\t *\t);\n\t **/\n\t/**\n\t * Allows Container Developer to add listener method that will be triggered when a specific event occurs.\n\t * @method on\n\t * @chainable\n\t * @param {String} token The token received from {{#crossLink \"F2.AppHandlers/getToken:method\"}}{{/crossLink}}.\n\t * @param {String} eventKey{.namespace} The event key used to determine which event to attach the listener to. The namespace is useful for removal\n\t * purposes. At this time it does not affect when an event is fired. Complete list of event keys available in\n\t * {{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.\n\t * @params {Function} listener A function that will be triggered when a specific event occurs. For detailed argument definition refer to {{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\t'appRenderBefore'\n\t *\t\tfunction() { F2.log('before app rendered!'); }\n\t *\t);\n\t *\n\t * Or:\n\t * @example\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\t'appRenderBefore.myNamespace',\n\t *\t\tfunction() { F2.log('before app rendered!'); }\n\t *\t);\n\t **/\n\ton: function (token, eventKey, func_or_element) {\n\t\tvar sNamespace = null;\n\n\t\tif (!eventKey) {\n\t\t\tthrow 'eventKey must be of type string and not null. For available appHandlers check F2.Constants.AppHandlers.';\n\t\t}\n\n\t\t// we need to check the key for a namespace\n\t\tif (eventKey.indexOf('.') > -1) {\n\t\t\tvar arData = eventKey.split('.');\n\t\t\teventKey = arData[0];\n\t\t\tsNamespace = arData[1];\n\t\t}\n\n\t\tif (_handlerCollection && _handlerCollection[eventKey]) {\n\t\t\t_handlerCollection[eventKey].push(\n\t\t\t\t_createHandler(\n\t\t\t\t\ttoken,\n\t\t\t\t\tsNamespace,\n\t\t\t\t\tfunc_or_element,\n\t\t\t\t\teventKey == 'appRender'\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tthrow 'Invalid EventKey passed. Check your inputs and try again.';\n\t\t}\n\n\t\treturn this;\n\t},\n\t/**\n\t * Allows Container Developer to remove listener methods for specific events\n\t * @method off\n\t * @chainable\n\t * @param {String} token The token received from {{#crossLink \"F2.AppHandlers/getToken:method\"}}{{/crossLink}}.\n\t * @param {String} eventKey{.namespace} The event key used to determine which event to attach the listener to. If no namespace is provided all\n\t *  listeners for the specified event type will be removed.\n\t *  Complete list available in {{#crossLink \"F2.Constants.AppHandlers\"}}{{/crossLink}}.\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.off(_token,'appRenderBefore');\n\t *\n\t **/\n\toff: function (token, eventKey) {\n\t\tvar sNamespace = null;\n\n\t\tif (!eventKey) {\n\t\t\tthrow 'eventKey must be of type string and not null. For available appHandlers check F2.Constants.AppHandlers.';\n\t\t}\n\n\t\t// we need to check the key for a namespace\n\t\tif (eventKey.indexOf('.') > -1) {\n\t\t\tvar arData = eventKey.split('.');\n\t\t\teventKey = arData[0];\n\t\t\tsNamespace = arData[1];\n\t\t}\n\n\t\tif (_handlerCollection && _handlerCollection[eventKey]) {\n\t\t\t_removeHandler(token, eventKey, sNamespace);\n\t\t} else {\n\t\t\tthrow 'Invalid EventKey passed. Check your inputs and try again.';\n\t\t}\n\n\t\treturn this;\n\t}\n};\n","/**\n * The apps namespace is a place for app developers to put the javascript\n * class that is used to initialize their app. The javascript classes should\n * be namepaced with the {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}.appId.\n * It is recommended that the code be placed in a closure to help keep the\n * global namespace clean.\n *\n * If the class has an 'init' function, that function will be called\n * automatically by F2.\n * @property Apps\n * @type object\n * @example\n *     F2.Apps[\"com_example_helloworld\"] = (function() {\n *         var App_Class = function(appConfig, appContent, root) {\n *             this._app = appConfig; // the F2.AppConfig object\n *             this._appContent = appContent // the F2.AppManifest.AppContent object\n *             this.$root = root; // the root DOM Element that contains this app\n *         }\n *\n *         App_Class.prototype.init = function() {\n *             // perform init actions\n *         }\n *\n *         return App_Class;\n *     })();\n * @example\n *     F2.Apps[\"com_example_helloworld\"] = function(appConfig, appContent, root) {\n *        return {\n *            init:function() {\n *                // perform init actions\n *            }\n *        };\n *     };\n * @for F2\n */\nexport default {};\n","/**\n * The AppConfig object represents an app's meta data\n * @class F2.AppConfig\n */\nexport default {\n\t/**\n\t * The unique ID of the app. More information can be found\n\t * [here](../../app-development.html#f2-appid)\n\t * @property appId\n\t * @type string\n\t * @required\n\t */\n\tappId: '',\n\t/**\n\t * An object that represents the context of an app\n\t * @property context\n\t * @type object\n\t */\n\tcontext: {},\n\t/**\n\t * True if the app should be requested in a single request with other apps.\n\t * @property enableBatchRequests\n\t * @type bool\n\t * @default false\n\t */\n\tenableBatchRequests: false,\n\t/**\n\t * The height of the app. The initial height will be pulled from\n\t * the {{#crossLink \"F2.AppConfig\"}}{{/crossLink}} object\n\t * @property height\n\t * @type int\n\t */\n\theight: 0,\n\t/**\n\t * The unique runtime ID of the app.\n\t *\n\t * **This property is populated during the\n\t * F2.{{#crossLink \"F2/registerApps\"}}{{/crossLink}} process**\n\t * @property instanceId\n\t * @type string\n\t */\n\tinstanceId: '',\n\t/**\n\t * The language and region specification for this container\n\t * represented as an IETF-defined standard language tag,\n\t * e.g. `\"en-us\"` or `\"de-de\"`. This is passed during the\n\t * F2.{{#crossLink \"F2/registerApps\"}}{{/crossLink}} process.\n\t *\n\t * @property containerLocale\n\t * @type string\n\t * @default null\n\t * @since 1.4.0\n\t */\n\tcontainerLocale: null,\n\t/**\n\t * The languages and regions supported by this app represented\n\t * as an array of IETF-defined standard language tags,\n\t * e.g. `[\"en-us\",\"de-de\"]`.\n\t *\n\t * @property localeSupport\n\t * @type array\n\t * @default []\n\t * @since 1.4.0\n\t */\n\tlocaleSupport: [],\n\t/**\n\t * The url to retrieve the {{#crossLink \"F2.AppManifest\"}}{{/crossLink}}\n\t * object.\n\t * @property manifestUrl\n\t * @type string\n\t * @required\n\t */\n\tmanifestUrl: '',\n\t/**\n\t * The recommended maximum width in pixels that this app should be run.\n\t * **It is up to the [container](../../container-development.html) to\n\t * implement the logic to prevent an app from being run when the maxWidth\n\t * requirements are not met.**\n\t * @property maxWidth\n\t * @type int\n\t */\n\tmaxWidth: 0,\n\t/**\n\t * The recommended minimum grid size that this app should be run. This\n\t * value corresponds to the 12-grid system that is used by the\n\t * [container](../../container-development.html). This property should be\n\t * set by apps that require a certain number of columns in their layout.\n\t * @property minGridSize\n\t * @type int\n\t * @default 4\n\t */\n\tminGridSize: 4,\n\t/**\n\t * The recommended minimum width in pixels that this app should be run. **It\n\t * is up to the [container](../../container-development.html) to implement\n\t * the logic to prevent an app from being run when the minWidth requirements\n\t * are not met.\n\t * @property minWidth\n\t * @type int\n\t * @default 300\n\t */\n\tminWidth: 300,\n\t/**\n\t * The name of the app\n\t * @property name\n\t * @type string\n\t * @required\n\t */\n\tname: '',\n\t/**\n\t * The root DOM element that contains the app\n\t *\n\t * **This property is populated during the\n\t * F2.{{#crossLink \"F2/registerApps\"}}{{/crossLink}} process**\n\t * @property root\n\t * @type Element\n\t */\n\troot: undefined\n};\n","import App from './app';\nimport AppConfig from './appConfig';\nimport AppContent from './appContent';\nimport AppManifest from './appManifest';\nimport ContainerConfig from './containerConfig';\n\n/**\n * Class stubs for documentation purposes\n * @main F2\n */\nexport default {\n\tApp,\n\tAppConfig,\n\tAppContent,\n\tAppManifest,\n\tContainerConfig\n};\n","/* eslint-disable no-unused-vars */\n\n/**\n * The App Class is an optional class that can be namespaced onto the\n * {{#crossLink \"F2\\Apps\"}}{{/crossLink}} namespace.  The\n * [F2 Docs](../../app-development.html#app-class)\n * has more information on the usage of the App Class.\n * @class F2.App\n * @constructor\n * @param {F2.AppConfig} appConfig The F2.AppConfig object for the app\n * @param {F2.AppManifest.AppContent} appContent The F2.AppManifest.AppContent\n * object\n * @param {Element} root The root DOM Element for the app\n */\nexport default function (appConfig, appContent, root) {\n\treturn {\n\t\t/**\n\t\t * An optional init function that will automatically be called when\n\t\t *{{#crossLink \"F2/registerApps\"}}F2.registerApps(){{/crossLink}} is called.\n\t\t * @method init\n\t\t * @optional\n\t\t */\n\t\tinit: function () {},\n\t\t/**\n\t\t * An optional destroy function that will automatically be called when\n\t\t * {{#crossLink \"F2/removeApp\"}}F2.removeApp(){{/crossLink}} and subsequently\n\t\t * the {{#crossLink \"F2.Constants.AppHandlers/APP_DESTROY:property\"}}F2.Constants.AppHandlers.APP_DESTROY{{/crossLink}} AppHandler.\n\t\t * @method destroy\n\t\t * @optional\n\t\t */\n\t\tdestroy: function () {}\n\t};\n}\n","/**\n * The AppContent object\n * @class F2.AppManifest.AppContent\n **/\nexport default {\n\t/**\n\t * Arbitrary data to be passed along with the app\n\t * @property data\n\t * @type object\n\t * @optional\n\t */\n\tdata: {},\n\t/**\n\t * The string of HTML representing the app\n\t * @property html\n\t * @type string\n\t * @required\n\t */\n\thtml: '',\n\t/**\n\t * A status message\n\t * @property status\n\t * @type string\n\t * @optional\n\t */\n\tstatus: ''\n};\n","/**\n * The assets needed to render an app on the page\n * @class F2.AppManifest\n */\nexport default {\n\t/**\n\t * The array of {{#crossLink \"F2.AppManifest.AppContent\"}}{{/crossLink}}\n\t * objects\n\t * @property apps\n\t * @type Array\n\t * @required\n\t */\n\tapps: [],\n\t/**\n\t * Any inline javascript tha should initially be run\n\t * @property inlineScripts\n\t * @type Array\n\t * @optional\n\t */\n\tinlineScripts: [],\n\t/**\n\t * Urls to javascript files required by the app\n\t * @property scripts\n\t * @type Array\n\t * @optional\n\t */\n\tscripts: [],\n\t/**\n\t * Urls to CSS files required by the app\n\t * @property styles\n\t * @type Array\n\t * @optional\n\t */\n\tstyles: []\n};\n","/* eslint-disable no-unused-vars */\n\n/**\n * An object containing configuration information for the\n * [container](../../container-development.html)\n * @class F2.ContainerConfig\n */\nexport default {\n\t/**\n\t * True to enable debug mode in F2.js. Adds additional logging, resource cache busting, etc.\n\t * @property debugMode\n\t * @type bool\n\t * @default false\n\t */\n\tdebugMode: false,\n\t/**\n\t * The default language and region specification for this container\n\t * represented as an IETF-defined standard language tag,\n\t * e.g. `\"en-us\"` or `\"de-de\"`. This value is passed to each app\n\t * registered as `containerLocale`.\n\t *\n\t * @property locale\n\t * @type string\n\t * @default null\n\t * @since 1.4.0\n\t */\n\tlocale: null,\n\t/**\n\t * Milliseconds before F2 fires callback on script resource load errors. Due to issue with the way Internet Explorer attaches load events to script elements, the error event doesn't fire.\n\t * @property scriptErrorTimeout\n\t * @type milliseconds\n\t * @default 7000 (7 seconds)\n\t */\n\tscriptErrorTimeout: 7000,\n\t/**\n\t * Allows the container to fully override how the AppManifest request is\n\t * made inside of F2.\n\t *\n\t * @method xhr\n\t * @param {string} url The manifest url\n\t * @param {Array} appConfigs An array of {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}\n\t * objects\n\t * @param {function} success The function to be called if the request\n\t * succeeds\n\t * @param {function} error The function to be called if the request fails\n\t * @param {function} complete The function to be called when the request\n\t * finishes (after success and error callbacks have been executed)\n\t * @return {XMLHttpRequest} The XMLHttpRequest object\n\t *\n\t * @example\n\t *     F2.init({\n\t *         xhr: function(url, appConfigs,successCallback, errorCallback, completeCallback) {\n\t *          var jsonpCallback = F2.Constants.JSONP_CALLBACK + appConfigs[0].appId, // Unique function name\n\t *          var fetchUrl = url + '?params=' + F2.stringify(appConfigs.apps, F2.appConfigReplacer);\n\t *          var fetchFunc = fetchJsonp(fetchUrl, {\n\t *                          timeout: 3000,\n\t *                          jsonpCallbackFunction: jsonpCallback\n\t *                          });\n\t *           fetchFunc.then(function(response) {\n\t *                          return response.json();\n\t *                      })\n\t *                      .then(function(data) {\n\t *                      \tsuccessCallback(data);\n\t *                      \tcompleteCallback();\n\t *                  })\n\t *                  .catch(function(error) {\n\t *                      F2.log('Failed to load app(s)', error.toString());\n\t *                      errorCallback();\n\t *                  });\n\t *         }\n\t *     });\n\t *\n\t * @for F2.ContainerConfig\n\t */\n\t//xhr: function(url, appConfigs, success, error, complete) {},\n\t/**\n\t * Allows the container to override individual parts of the AppManifest\n\t * request.  See properties and methods with the `xhr.` prefix.\n\t * @property xhr\n\t * @type Object\n\t *\n\t * @example\n\t *     F2.init({\n\t *         xhr: {\n\t *             url: function(url, appConfigs) {\n\t *                 return 'http://example.com/proxy.php?url=' + encocdeURIComponent(url);\n\t *             }\n\t *         }\n\t *     });\n\t */\n\txhr: {\n\t\t/**\n\t\t * Allows the container to override the request data type (JSON or JSONP)\n\t\t * that is used for the request\n\t\t * @method xhr.dataType\n\t\t * @param {string} url The manifest url\n\t\t * @param {Array} appConfigs An array of {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}\n\t\t * objects\n\t\t * @return {string} The request data type that should be used\n\t\t *\n\t\t * @example\n\t\t *     F2.init({\n\t\t *         xhr: {\n\t\t *             dataType: function(url) {\n\t\t *                 return F2.isLocalRequest(url) ? 'json' : 'jsonp';\n\t\t *             },\n\t\t *             type: function(url) {\n\t\t *                 return F2.isLocalRequest(url) ? 'POST' : 'GET';\n\t\t *             }\n\t\t *         }\n\t\t *     });\n\t\t */\n\t\tdataType: function (url, appConfigs) {},\n\t\t/**\n\t\t * Allows the container to override the request method that is used.\n\t\t * @method xhr.type\n\t\t * @param {string} url The manifest url\n\t\t * @param {Array} appConfigs An array of {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}\n\t\t * objects\n\t\t * @return {string} The request method that should be used\n\t\t *\n\t\t * @example\n\t\t *     F2.init({\n\t\t *         xhr: {\n\t\t *             dataType: function(url) {\n\t\t *                 return F2.isLocalRequest(url) ? 'json' : 'jsonp';\n\t\t *             },\n\t\t *             type: function(url) {\n\t\t *                 return F2.isLocalRequest(url) ? 'POST' : 'GET';\n\t\t *             }\n\t\t *         }\n\t\t *     });\n\t\t */\n\t\ttype: function (url, appConfigs) {},\n\t\t/**\n\t\t * Allows the container to override the url that is used to request an\n\t\t * app's F2.{{#crossLink \"F2.AppManifest\"}}{{/crossLink}}\n\t\t * @method xhr.url\n\t\t * @param {string} url The manifest url\n\t\t * @param {Array} appConfigs An array of {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}\n\t\t * objects\n\t\t * @return {string} The url that should be used for the request\n\t\t *\n\t\t * @example\n\t\t *     F2.init({\n\t\t *         xhr: {\n\t\t *             url: function(url, appConfigs) {\n\t\t *                 return 'http://example.com/proxy.php?url=' + encocdeURIComponent(url);\n\t\t *             }\n\t\t *         }\n\t\t *     });\n\t\t */\n\t\turl: function (url, appConfigs) {}\n\t},\n\t/**\n\t * Allows the container to override the script loader which requests\n\t * dependencies defined in the {{#crossLink \"F2.AppManifest\"}}{{/crossLink}}.\n\t * @property loadScripts\n\t * @type function\n\t *\n\t * @example\n\t *     F2.init({\n\t *\t\t\tloadScripts: function(scripts,inlines,callback){\n\t *\t\t\t\t//load scripts using $.load() for each script or require(scripts)\n\t *\t\t\t\tcallback();\n\t *\t\t\t}\n\t *     });\n\t */\n\tloadScripts: function (scripts, inlines, callback) {},\n\t/**\n\t * Allows the container to override the stylesheet loader which requests\n\t * dependencies defined in the {{#crossLink \"F2.AppManifest\"}}{{/crossLink}}.\n\t * @property loadStyles\n\t * @type function\n\t *\n\t * @example\n\t *     F2.init({\n\t *\t\t\tloadStyles: function(styles,callback){\n\t *\t\t\t\t//load styles using $.load() for each stylesheet or another method\n\t *\t\t\t\tcallback();\n\t *\t\t\t}\n\t *     });\n\t */\n\tloadStyles: function (styles, callback) {}\n};\n","/**\n * Constants used throughout the Open Financial Framework\n * @class F2.Constants.AppHandlers\n * @static\n */\nexport default {\n\t/**\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( {{#crossLink \"F2.AppConfig\"}}appConfig{{/crossLink}} )\n\t * @property APP_MANIFEST_REQUEST_FAIL\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\tF2.Constants.AppHandlers.APP_MANIFEST_REQUEST_FAIL,\n\t *\t\tfunction(appConfig)\n\t *\t\t{\n\t *\t\t\tYou can use information from the appConfig to surface a custom error message in the dom\n\t *\t\t\tOr display some kind of default error placeholder element rather than having a blank spot in the dom\n\t *\t\t}\n\t *\t);\n\t */\n\tAPP_MANIFEST_REQUEST_FAIL: 'appManifestRequestFail',\n\t/**\n\t * Identifies the create root method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( {{#crossLink \"F2.AppConfig\"}}appConfig{{/crossLink}} )\n\t * @property APP_CREATE_ROOT\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\tF2.Constants.AppHandlers.APP_CREATE_ROOT,\n\t *\t\tfunction(appConfig)\n\t *\t\t{\n\t *\t\t\t// If you want to create a custom root. By default F2 uses the app's outermost HTML element.\n\t *\t\t\t// the app's html is not available until after the manifest is retrieved so this logic occurs in F2.Constants.AppHandlers.APP_RENDER\n\t *\t\t\tappConfig.root = document.createElement('section');\n\t *\t\t}\n\t *\t);\n\t */\n\tAPP_CREATE_ROOT: 'appCreateRoot',\n\t/**\n\t * Identifies the before app render method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( {{#crossLink \"F2.AppConfig\"}}appConfig{{/crossLink}} )\n\t * @property APP_RENDER_BEFORE\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\tF2.Constants.AppHandlers.APP_RENDER_BEFORE,\n\t *\t\tfunction(appConfig)\n\t *\t\t{\n\t *\t\t\tF2.log(appConfig);\n\t *\t\t}\n\t *\t);\n\t */\n\tAPP_RENDER_BEFORE: 'appRenderBefore',\n\t/**\n\t * Identifies the app render method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( {{#crossLink \"F2.AppConfig\"}}appConfig{{/crossLink}}, [appHtml](../../app-development.html#app-design) )\n\t * @property APP_RENDER\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *   var _token = F2.AppHandlers.getToken();\n\t *   F2.AppHandlers.on(\n\t *       _token,\n\t *       F2.Constants.AppHandlers.APP_RENDER,\n\t *       function(appConfig, appHtml)\n\t *       {\n\t *           // if no app root is defined use the app's outer most node\n\t *           if(!appConfig.root)\n\t *           {\n\t *               appConfig.root = domify(appHtml);\n\t *           }\n\t *           else\n\t *           {\n\t *               // append the app html to the root\n\t *               appConfig.root.appendChild(domify(appHtml));\n\t *           }\n\t *\n\t *           // append the root to the body by default.\n\t *           document.body.appendChild(appConfig.root);\n\t *       }\n\t *   );\n\t */\n\tAPP_RENDER: 'appRender',\n\t/**\n\t * Identifies the after app render method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( {{#crossLink \"F2.AppConfig\"}}appConfig{{/crossLink}} )\n\t * @property APP_RENDER_AFTER\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\tF2.Constants.AppHandlers.APP_RENDER_AFTER,\n\t *\t\tfunction(appConfig)\n\t *\t\t{\n\t *\t\t\tF2.log(appConfig);\n\t *\t\t}\n\t *\t);\n\t */\n\tAPP_RENDER_AFTER: 'appRenderAfter',\n\t/**\n\t * Identifies the before app destroy method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( appInstance )\n\t * @property APP_DESTROY_BEFORE\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *\tvar _token = F2.AppHandlers.getToken();\n\t *\tF2.AppHandlers.on(\n\t *\t\t_token,\n\t *\t\tF2.Constants.AppHandlers.APP_DESTROY_BEFORE,\n\t *\t\tfunction(appInstance)\n\t *\t\t{\n\t *\t\t\tF2.log(appInstance);\n\t *\t\t}\n\t *\t);\n\t */\n\tAPP_DESTROY_BEFORE: 'appDestroyBefore',\n\t/**\n\t * Identifies the app destroy method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( appInstance )\n\t * @property APP_DESTROY\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *   var _token = F2.AppHandlers.getToken();\n\t *   F2.AppHandlers.on(\n\t *       _token,\n\t *       F2.Constants.AppHandlers.APP_DESTROY,\n\t *       function(appInstance)\n\t *       {\n\t *           // call the apps destroy method, if it has one\n\t *           if(appInstance && appInstance.app && appInstance.app.destroy && typeof(appInstance.app.destroy) == 'function')\n\t *           {\n\t *               appInstance.app.destroy();\n\t *           }\n\t *           else if(appInstance && appInstance.app && appInstance.app.destroy)\n\t *           {\n\t *               F2.log(appInstance.config.appId + ' has a destroy property, but destroy is not of type function and as such will not be executed.');\n\t *           }\n\t *\n\t *           // remove the root\n\t *           appInstance.config.root.parentNode.removeChild(appInstance.config.root);\n\t *       }\n\t *   );\n\t */\n\tAPP_DESTROY: 'appDestroy',\n\t/**\n\t * Identifies the after app destroy method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( appInstance )\n\t * @property APP_DESTROY_AFTER\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t *   var _token = F2.AppHandlers.getToken();\n\t *   F2.AppHandlers.on(\n\t *       _token,\n\t *       F2.Constants.AppHandlers.APP_DESTROY_AFTER,\n\t *       function(appInstance)\n\t *       {\n\t *           F2.log(appInstance);\n\t *       }\n\t *   );\n\t */\n\tAPP_DESTROY_AFTER: 'appDestroyAfter',\n\t/**\n\t * Identifies the app script load failed method for use in AppHandlers.on/off.\n\t * When bound using {{#crossLink \"F2.AppHandlers/on\"}}F2.AppHandlers.on(){{/crossLink}} the listener function passed will receive the\n\t * following argument(s): ( {{#crossLink \"F2.AppConfig\"}}appConfig{{/crossLink}}, scriptInfo )\n\t * @property APP_SCRIPT_LOAD_FAILED\n\t * @type string\n\t * @static\n\t * @final\n\t * @example\n\t * var _token = F2.AppHandlers.getToken();\n\t * F2.AppHandlers.on(\n\t *     _token,\n\t *     F2.Constants.AppHandlers.APP_SCRIPT_LOAD_FAILED,\n\t *     function(appConfig, scriptInfo) {\n\t *         F2.log(appConfig.appId);\n\t *     }\n\t * );\n\t */\n\tAPP_SCRIPT_LOAD_FAILED: 'appScriptLoadFailed'\n};\n","import appHandlers from './appHandlers';\nimport css from './css';\nimport events from './events';\n\n/**\n * Constants used throughout the Open Financial Framework\n * @class F2.Constants\n * @static\n */\nexport default {\n\tAppHandlers: appHandlers,\n\tAppStatus: {\n\t\tERROR: 'ERROR',\n\t\tSUCCESS: 'SUCCESS'\n\t},\n\tCss: css,\n\tEvents: events,\n\tJSONP_CALLBACK: 'F2_jsonpCallback_'\n};\n","/**\n * Constants used throughout the Open Financial Framework\n * @class F2.Constants.Css\n * @static\n */\nexport default {\n\t/**\n\t * The APP class should be applied to the DOM Element that surrounds the\n\t * entire app, including any extra html that surrounds the APP\\_CONTAINER\n\t * that is inserted by the container. See the\n\t * {{#crossLink \"F2.ContainerConfig\"}}{{/crossLink}} object.\n\t * @property APP\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tAPP: 'f2-app',\n\t/**\n\t * The APP\\_CONTAINER class should be applied to the outermost DOM Element\n\t * of the app.\n\t * @property APP_CONTAINER\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tAPP_CONTAINER: 'f2-app-container'\n};\n","/**\n * Constants used throughout the Open Financial Framework\n * @class F2.Constants.Events\n * @static\n */\nexport default {\n\t/**\n\t * The APP_SCRIPTS_LOADED event is fired when all the scripts defined in\n\t * the AppManifest have been loaded.\n\t * @property APP_SCRIPTS_LOADED\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tAPP_SCRIPTS_LOADED: 'App.scriptsLoaded',\n\t/**\n\t * The APP\\_SYMBOL\\_CHANGE event is fired when the symbol is changed in an\n\t * app. It is up to the app developer to fire this event.\n\t * Returns an object with the symbol and company name:\n\t *\n\t *     { symbol: 'MSFT', name: 'Microsoft Corp (NASDAQ)' }\n\t *\n\t * @property APP_SYMBOL_CHANGE\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tAPP_SYMBOL_CHANGE: 'App.symbolChange',\n\t/**\n\t * The APP\\_WIDTH\\_CHANGE event will be fired by the container when the\n\t * width of an app is changed. The app's instanceId should be concatenated\n\t * to this constant.\n\t * Returns an object with the gridSize and width in pixels:\n\t *\n\t *     { gridSize:8, width:620 }\n\t *\n\t * @property APP_WIDTH_CHANGE\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tAPP_WIDTH_CHANGE: 'App.widthChange.',\n\t/**\n\t * The CONTAINER\\_SYMBOL\\_CHANGE event is fired when the symbol is changed\n\t * at the container level. This event should only be fired by the\n\t * container or container provider.\n\t * Returns an object with the symbol and company name:\n\t *\n\t *     { symbol: 'MSFT', name: 'Microsoft Corp (NASDAQ)' }\n\t *\n\t * @property CONTAINER_SYMBOL_CHANGE\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tCONTAINER_SYMBOL_CHANGE: 'Container.symbolChange',\n\t/**\n\t * The CONTAINER\\_WIDTH\\_CHANGE event will be fired by the container when\n\t * the width of the container has changed.\n\t * @property CONTAINER_WIDTH_CHANGE\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tCONTAINER_WIDTH_CHANGE: 'Container.widthChange',\n\t/**\n\t * The CONTAINER\\_LOCALE\\_CHANGE event will be fired by the container when\n\t * the locale of the container has changed. This event should only be fired by the\n\t * container or container provider.\n\t * Returns an object with the updated locale (IETF-defined standard language tag):\n\t *\n\t *     { locale: 'en-us' }\n\t *\n\t * @property CONTAINER_LOCALE_CHANGE\n\t * @type string\n\t * @static\n\t * @final\n\t */\n\tCONTAINER_LOCALE_CHANGE: 'Container.localeChange'\n};\n","import appHandlers from './appHandlers';\nimport appClasses from './apps';\nimport classes from './classes';\nimport cloneDeep from 'lodash.clonedeep';\nimport constants from './constants';\nimport dom from './utils/dom';\nimport domify from 'domify';\nimport events from './events';\nimport utils from './utils';\nimport fetchJsonp from 'fetch-jsonp';\n\nvar _apps = {};\nvar _config = false;\nvar _sAppHandlerToken = appHandlers.__f2GetToken();\nvar _loadingScripts = {};\n\n/**\n * Search for a value within an array.\n * @method inArray\n * @param {object} value The value to search for\n * @param {Array} array The array to search\n * @return {int} index of the value in the array, -1 if value not found\n */\nvar _inArray = function (value, array) {\n\tif (Array.isArray(array)) {\n\t\treturn array.indexOf(value);\n\t}\n\n\tfor (var i = 0; i < array.length; i++) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n};\n\n/**\n * Adds properties to the AppConfig object\n * @method _createAppConfig\n * @private\n * @param {F2.AppConfig} appConfig The F2.AppConfig object\n * @return {F2.AppConfig} The new F2.AppConfig object, prepopulated with\n * necessary properties\n */\nvar _createAppConfig = function (appConfig) {\n\t// make a copy of the app config to ensure that the original is not modified\n\tappConfig = cloneDeep(appConfig) || {};\n\n\t// create the instanceId for the app\n\tappConfig.instanceId = appConfig.instanceId || utils.guid();\n\n\t//pass container-defined locale to each app\n\tif (classes.ContainerConfig.locale) {\n\t\tappConfig.containerLocale = classes.ContainerConfig.locale;\n\t}\n\n\treturn appConfig;\n};\n\n/**\n * Generate an AppConfig from the element's attributes\n * @method _getAppConfigFromElement\n * @private\n * @param {Element} node The DOM node from which to generate the F2.AppConfig object\n * @return {F2.AppConfig} The new F2.AppConfig object\n */\nvar _getAppConfigFromElement = function (node) {\n\tvar appConfig;\n\n\tif (node) {\n\t\tvar appId = node.getAttribute('data-f2-appid');\n\t\tvar manifestUrl = node.getAttribute('data-f2-manifesturl');\n\n\t\tif (appId && manifestUrl) {\n\t\t\tappConfig = {\n\t\t\t\tappId: appId,\n\t\t\t\tenableBatchRequests: node.hasAttribute('data-f2-enablebatchrequests'),\n\t\t\t\tmanifestUrl: manifestUrl,\n\t\t\t\troot: node\n\t\t\t};\n\n\t\t\t// See if the user passed in a block of serialized json\n\t\t\tvar contextJson = node.getAttribute('data-f2-context');\n\n\t\t\tif (contextJson) {\n\t\t\t\ttry {\n\t\t\t\t\tappConfig.context = utils.parse(contextJson);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t'F2: \"data-f2-context\" of node is not valid JSON',\n\t\t\t\t\t\t'\"' + e + '\"'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn appConfig;\n};\n\n/**\n * Returns true if the DOM node has children that are not text nodes\n * @method _hasNonTextChildNodes\n * @private\n * @param {Element} node The DOM node\n * @return {bool} True if there are non-text children\n */\nvar _hasNonTextChildNodes = function (node) {\n\tvar hasNodes = false;\n\n\tif (node.hasChildNodes()) {\n\t\tfor (var i = 0, len = node.childNodes.length; i < len; i++) {\n\t\t\tif (node.childNodes[i].nodeType === 1) {\n\t\t\t\thasNodes = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn hasNodes;\n};\n\n/**\n * Adds properties to the ContainerConfig object to take advantage of defaults\n * @method _hydrateContainerConfig\n * @private\n * @param {F2.ContainerConfig} containerConfig The F2.ContainerConfig object\n */\nvar _hydrateContainerConfig = function (containerConfig) {\n\tif (!containerConfig.scriptErrorTimeout) {\n\t\tcontainerConfig.scriptErrorTimeout =\n\t\t\tclasses.ContainerConfig.scriptErrorTimeout;\n\t}\n\n\tif (containerConfig.debugMode !== true) {\n\t\tcontainerConfig.debugMode = classes.ContainerConfig.debugMode;\n\t}\n\n\tif (containerConfig.locale && typeof containerConfig.locale == 'string') {\n\t\tclasses.ContainerConfig.locale = containerConfig.locale;\n\t}\n};\n\n/**\n * Attach container Events\n * @method _initContainerEvents\n * @private\n */\nvar _initContainerEvents = function () {\n\tvar resizeTimeout;\n\tvar resizeHandler = function () {\n\t\tevents.emit(constants.Events.CONTAINER_WIDTH_CHANGE);\n\t};\n\n\t// TODO: remove this on destroy()\n\twindow.addEventListener('resize', function () {\n\t\tclearTimeout(resizeTimeout);\n\t\tresizeTimeout = setTimeout(resizeHandler, 100);\n\t});\n\n\t//listen for container-broadcasted locale changes\n\tevents.on(constants.Events.CONTAINER_LOCALE_CHANGE, function (data) {\n\t\tif (data.locale && typeof data.locale == 'string') {\n\t\t\tclasses.ContainerConfig.locale = data.locale;\n\t\t}\n\t});\n};\n\n/**\n * Checks if an element is a placeholder element\n * @method _isPlaceholderElement\n * @private\n * @param {Element} node The DOM element to check\n * @return {bool} True if the element is a placeholder\n */\nvar _isPlaceholderElement = function (node) {\n\treturn (\n\t\tdom.isNativeNode(node) &&\n\t\t!_hasNonTextChildNodes(node) &&\n\t\t!!node.getAttribute('data-f2-appid') &&\n\t\t!!node.getAttribute('data-f2-manifesturl')\n\t);\n};\n\n/**\n * Has the container been init?\n * @method _isInit\n * @private\n * @return {bool} True if the container has been init\n */\nvar _isInit = function () {\n\treturn !!_config;\n};\n\n/**\n * Instantiates each app from it's appConfig and stores that in a local private collection\n * @method _createAppInstance\n * @private\n * @param {Array} appConfigs An array of {{#crossLink \"F2.AppConfig\"}}{{/crossLink}} objects\n */\nvar _createAppInstance = function (appConfig, appContent) {\n\t// instantiate F2.App\n\tif (appClasses[appConfig.appId] !== undefined) {\n\t\tif (typeof appClasses[appConfig.appId] === 'function') {\n\t\t\t// IE\n\t\t\tsetTimeout(function () {\n\t\t\t\t// #265\n\t\t\t\tif (!_apps[appConfig.instanceId]) {\n\t\t\t\t\tutils.log(\n\t\t\t\t\t\t'Unable to create app (' +\n\t\t\t\t\t\t\tappConfig.instanceId +\n\t\t\t\t\t\t\t') as it does not exist.'\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_apps[appConfig.instanceId].app = new appClasses[appConfig.appId](\n\t\t\t\t\tappConfig,\n\t\t\t\t\tappContent,\n\t\t\t\t\tappConfig.root\n\t\t\t\t);\n\t\t\t\tif (_apps[appConfig.instanceId].app['init'] !== undefined) {\n\t\t\t\t\t_apps[appConfig.instanceId].app.init();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t} else {\n\t\t\tutils.log(\n\t\t\t\t'app initialization class is defined but not a function. (' +\n\t\t\t\t\tappConfig.appId +\n\t\t\t\t\t')'\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n * Loads the app's html/css/javascript\n * @method loadApp\n * @private\n * @param {Array} appConfigs An array of\n * {{#crossLink \"F2.AppConfig\"}}{{/crossLink}} objects\n * @param {F2.AppManifest} [appManifest] The AppManifest object\n */\nvar _loadApps = function (appConfigs, appManifest) {\n\tappConfigs = [].concat(appConfigs);\n\n\t// check that the number of apps in manifest matches the number requested\n\tif (appConfigs.length != appManifest.apps.length) {\n\t\tutils.log(\n\t\t\t'The number of apps defined in the AppManifest do not match the number requested.',\n\t\t\tappManifest\n\t\t);\n\t\treturn;\n\t}\n\n\tvar _findExistingScripts = function () {\n\t\tvar scripts = document.querySelectorAll('script[src]') || [];\n\t\tvar src = [];\n\n\t\tfor (var i = 0; i < scripts.length; i++) {\n\t\t\tsrc.push(scripts[i].src);\n\t\t}\n\n\t\treturn src;\n\t};\n\n\tvar _findExistingStyles = function () {\n\t\tvar src = [];\n\t\tvar styles = document.querySelectorAll('link[href]') || [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tsrc.push(styles[i].src);\n\t\t}\n\n\t\treturn src;\n\t};\n\n\t// Fn for loading manifest Styles\n\tvar _loadStyles = function (styles, cb) {\n\t\t// Reduce the list to styles that haven't been loaded\n\t\tvar existingStyles = _findExistingStyles();\n\t\tvar filteredStyles = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar url = styles[i];\n\t\t\tif (url && _inArray(url, existingStyles) === -1) {\n\t\t\t\tfilteredStyles.push(url);\n\t\t\t}\n\t\t}\n\n\t\t// Attempt to use the user provided method\n\t\tif (_config.loadStyles) {\n\t\t\treturn _config.loadStyles(filteredStyles, cb);\n\t\t}\n\n\t\t// load styles, see #101\n\t\tvar stylesFragment = null,\n\t\t\tuseCreateStyleSheet = !!document.createStyleSheet;\n\n\t\tfor (var j = 0; j < filteredStyles.length; j++) {\n\t\t\tif (useCreateStyleSheet) {\n\t\t\t\tdocument.createStyleSheet(filteredStyles[j]);\n\t\t\t} else {\n\t\t\t\tstylesFragment = stylesFragment || [];\n\t\t\t\tstylesFragment.push(\n\t\t\t\t\t'<link rel=\"stylesheet\" type=\"text/css\" href=\"' +\n\t\t\t\t\t\tfilteredStyles[j] +\n\t\t\t\t\t\t'\"/>'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (stylesFragment) {\n\t\t\tvar node = domify(stylesFragment.join(''));\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(node);\n\t\t}\n\n\t\tcb();\n\t};\n\n\t// For loading AppManifest.scripts\n\t// Parts derived from curljs, headjs, requirejs, dojo\n\tvar _loadScripts = function (scripts, cb) {\n\t\t// Reduce the list to scripts that haven't been loaded\n\t\tvar existingScripts = _findExistingScripts();\n\t\tvar loadingScripts = Object.keys(_loadingScripts);\n\t\tvar filteredScripts = [];\n\n\t\tfor (var i = 0; i < scripts.length; i++) {\n\t\t\tvar url = scripts[i];\n\t\t\tif (\n\t\t\t\turl &&\n\t\t\t\t(_inArray(url, existingScripts) === -1 ||\n\t\t\t\t\t_inArray(url, loadingScripts) !== -1)\n\t\t\t) {\n\t\t\t\tfilteredScripts.push(url);\n\t\t\t}\n\t\t}\n\n\t\t// Attempt to use the user provided method\n\t\tif (_config.loadScripts) {\n\t\t\treturn _config.loadScripts(filteredScripts, cb);\n\t\t}\n\n\t\tif (!filteredScripts.length) {\n\t\t\treturn cb();\n\t\t}\n\n\t\tvar doc = window.document;\n\t\tvar scriptCount = filteredScripts.length;\n\t\tvar scriptsLoaded = 0;\n\t\t//http://caniuse.com/#feat=script-async\n\t\t// var supportsAsync = 'async' in doc.createElement('script') || 'MozAppearance' in doc.documentElement.style || window.opera;\n\t\tvar head = doc && (doc['head'] || doc.getElementsByTagName('head')[0]);\n\t\t// to keep IE from crying, we need to put scripts before any\n\t\t// <base> elements, but after any <meta>. this should do it:\n\t\tvar insertBeforeEl = (head && head.getElementsByTagName('base')[0]) || null;\n\t\t// Check for IE10+ so that we don't rely on onreadystatechange, readyStates for IE6-9\n\t\tvar readyStates =\n\t\t\t'addEventListener' in window ? {} : { loaded: true, complete: true };\n\n\t\t// Log and emit event for the failed (400,500) scripts\n\t\tvar _error = function (e) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tvar evtData = {\n\t\t\t\t\tsrc: e.target.src,\n\t\t\t\t\tappId: appConfigs[0].appId\n\t\t\t\t};\n\n\t\t\t\t// Send error to console\n\t\t\t\tutils.log(\n\t\t\t\t\t\"Script defined in '\" +\n\t\t\t\t\t\tevtData.appId +\n\t\t\t\t\t\t\"' failed to load '\" +\n\t\t\t\t\t\tevtData.src +\n\t\t\t\t\t\t\"'\"\n\t\t\t\t);\n\n\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\tconstants.AppHandlers.APP_SCRIPT_LOAD_FAILED,\n\t\t\t\t\tappConfigs[0],\n\t\t\t\t\tevtData.src\n\t\t\t\t);\n\t\t\t}, _config.scriptErrorTimeout); // Defaults to 7000\n\t\t};\n\n\t\tvar _checkComplete = function () {\n\t\t\tif (++scriptsLoaded === scriptCount) {\n\t\t\t\tcb();\n\t\t\t}\n\t\t};\n\n\t\tvar _emptyWaitlist = function (resourceKey, errorEvt) {\n\t\t\tvar waiting,\n\t\t\t\twaitlist = _loadingScripts[resourceKey];\n\n\t\t\tif (!waitlist) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < waitlist.length; i++) {\n\t\t\t\twaiting = waitlist[i];\n\n\t\t\t\tif (errorEvt) {\n\t\t\t\t\twaiting.error(errorEvt);\n\t\t\t\t} else {\n\t\t\t\t\twaiting.success();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_loadingScripts[resourceKey] = null;\n\t\t};\n\n\t\t// Load scripts and eval inlines once complete\n\t\tfilteredScripts.forEach(function (e) {\n\t\t\tvar script = doc.createElement('script'),\n\t\t\t\tresourceUrl = e,\n\t\t\t\tresourceKey = resourceUrl.toLowerCase();\n\n\t\t\t// this script is actively loading, add this app to the wait list\n\t\t\tif (_loadingScripts[resourceKey]) {\n\t\t\t\t_loadingScripts[resourceKey].push({\n\t\t\t\t\tsuccess: _checkComplete,\n\t\t\t\t\terror: _error\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// create the waitlist\n\t\t\t_loadingScripts[resourceKey] = [];\n\n\t\t\t// If in debugMode, add cache buster to each script URL\n\t\t\tif (_config.debugMode) {\n\t\t\t\tresourceUrl +=\n\t\t\t\t\t(/\\?/.test(resourceUrl) ? '&' : '?') +\n\t\t\t\t\t'cachebuster=' +\n\t\t\t\t\tnew Date().getTime();\n\t\t\t}\n\n\t\t\t// Scripts are loaded asynchronously and executed in order\n\t\t\t// in supported browsers: http://caniuse.com/#feat=script-async\n\t\t\tscript.async = false;\n\t\t\tscript.type = 'text/javascript';\n\t\t\tscript.charset = 'utf-8';\n\n\t\t\tscript.onerror = function (e) {\n\t\t\t\t_error(e);\n\t\t\t\t_emptyWaitlist(resourceKey, e);\n\t\t\t};\n\n\t\t\t// Use a closure for the load event so that we can dereference the original script\n\t\t\tscript.onload = script.onreadystatechange = function (e) {\n\t\t\t\te = e || window.event; // For older IE\n\n\t\t\t\t// detect when it's done loading\n\t\t\t\t// ev.type == 'load' is for all browsers except IE6-9\n\t\t\t\t// IE6-9 need to use onreadystatechange and look for\n\t\t\t\t// el.readyState in {loaded, complete} (yes, we need both)\n\t\t\t\tif (e.type == 'load' || readyStates[script.readyState]) {\n\t\t\t\t\t// Done, cleanup\n\t\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = '';\n\t\t\t\t\t// increment and check if scripts are done\n\t\t\t\t\t_checkComplete();\n\t\t\t\t\t// empty wait list\n\t\t\t\t\t_emptyWaitlist(resourceKey);\n\t\t\t\t\t// Dereference script\n\t\t\t\t\tscript = null;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//set the src, start loading\n\t\t\tscript.src = resourceUrl;\n\n\t\t\t//<head> really is the best\n\t\t\thead.insertBefore(script, insertBeforeEl);\n\t\t});\n\t};\n\n\tvar _loadInlineScripts = function (inlines, cb) {\n\t\t// Attempt to use the user provided method\n\t\tif (_config.loadInlineScripts) {\n\t\t\t_config.loadInlineScripts(inlines, cb);\n\t\t} else {\n\t\t\tfor (var i = 0, len = inlines.length; i < len; i++) {\n\t\t\t\ttry {\n\t\t\t\t\teval(inlines[i]);\n\t\t\t\t} catch (exception) {\n\t\t\t\t\tutils.log(\n\t\t\t\t\t\t'Error loading inline script: ' + exception + '\\n\\n' + inlines[i]\n\t\t\t\t\t);\n\n\t\t\t\t\t// Emit events\n\t\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\t\tconstants.AppHandlers.APP_SCRIPT_LOAD_FAILED,\n\t\t\t\t\t\tappConfigs[0],\n\t\t\t\t\t\texception\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcb();\n\t\t}\n\t};\n\n\t// Determine whether an element has been added to the page\n\tvar elementInDocument = function (element) {\n\t\tif (element) {\n\t\t\twhile (element.parentNode) {\n\t\t\t\telement = element.parentNode;\n\n\t\t\t\tif (element === document) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t// Fn for loading manifest app html\n\tvar _loadHtml = function (apps) {\n\t\tapps.forEach(function (a, i) {\n\t\t\tif (_isPlaceholderElement(appConfigs[i].root)) {\n\t\t\t\tvar node = domify(a.html);\n\t\t\t\tnode.classList.add(constants.Css.APP_CONTAINER);\n\t\t\t\tnode.classList.add(appConfigs[i].appId);\n\t\t\t\tappConfigs[i].root.classList.add(constants.Css.APP);\n\t\t\t\tappConfigs[i].root.appendChild(node);\n\t\t\t} else {\n\t\t\t\tvar container = document.createElement('div');\n\t\t\t\tvar childNode = domify(a.html);\n\t\t\t\tchildNode.classList.add(constants.Css.APP_CONTAINER);\n\t\t\t\tchildNode.classList.add(appConfigs[i].appId);\n\t\t\t\tcontainer.appendChild(childNode);\n\n\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\tconstants.AppHandlers.APP_RENDER,\n\t\t\t\t\tappConfigs[i], // the app config\n\t\t\t\t\tcontainer.innerHTML\n\t\t\t\t);\n\n\t\t\t\tvar appId = appConfigs[i].appId,\n\t\t\t\t\troot = appConfigs[i].root;\n\n\t\t\t\tif (!root) {\n\t\t\t\t\tthrow (\n\t\t\t\t\t\t'Root for ' +\n\t\t\t\t\t\tappId +\n\t\t\t\t\t\t' must be a native DOM element and cannot be null or undefined. Check your AppHandler callbacks to ensure you have set App root to a native DOM element.'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!elementInDocument(root)) {\n\t\t\t\t\tthrow (\n\t\t\t\t\t\t'App root for ' +\n\t\t\t\t\t\tappId +\n\t\t\t\t\t\t' was not appended to the DOM. Check your AppHandler callbacks to ensure you have rendered the app root to the DOM.'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\tconstants.AppHandlers.APP_RENDER_AFTER,\n\t\t\t\t\tappConfigs[i] // the app config\n\t\t\t\t);\n\n\t\t\t\tif (!dom.isNativeNode(root)) {\n\t\t\t\t\tthrow (\n\t\t\t\t\t\t'App root for ' +\n\t\t\t\t\t\tappId +\n\t\t\t\t\t\t' must be a native DOM element. Check your AppHandler callbacks to ensure you have set app root to a native DOM element.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\t// Pull out the manifest data\n\tvar scripts = appManifest.scripts || [];\n\tvar styles = appManifest.styles || [];\n\tvar inlines = appManifest.inlineScripts || [];\n\tvar apps = appManifest.apps || [];\n\n\t// Finally, load the styles, html, and scripts\n\t_loadStyles(styles, function () {\n\t\t// Put the html on the page\n\t\t_loadHtml(apps);\n\t\t// Add the script content to the page\n\t\t_loadScripts(scripts, function () {\n\t\t\t// emit event we're done with scripts\n\t\t\tif (appConfigs[0]) {\n\t\t\t\tevents.emit('APP_SCRIPTS_LOADED', {\n\t\t\t\t\tappId: appConfigs[0].appId,\n\t\t\t\t\tscripts: scripts\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Load any inline scripts\n\t\t\t_loadInlineScripts(inlines, function () {\n\t\t\t\t// Create the apps\n\t\t\t\tappConfigs.forEach(function (a, i) {\n\t\t\t\t\t_createAppInstance(a, appManifest.apps[i]);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n};\n\n/**\n * Checks if the app is valid\n * @method _validateApp\n * @private\n * @param {F2.AppConfig} appConfig The F2.AppConfig object\n * @returns {bool} True if the app is valid\n */\nvar _validateApp = function (appConfig) {\n\t// check for valid app configurations\n\tif (!appConfig.appId) {\n\t\tutils.log('\"appId\" missing from app object');\n\t\treturn false;\n\t} else if (!appConfig.root && !appConfig.manifestUrl) {\n\t\tutils.log('\"manifestUrl\" missing from app object');\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n\n/**\n * Checks if the ContainerConfig is valid\n * @method _validateContainerConfig\n * @private\n * @returns {bool} True if the config is valid\n */\nvar _validateContainerConfig = function () {\n\tif (_config) {\n\t\tif (_config.xhr) {\n\t\t\tif (\n\t\t\t\t!(typeof _config.xhr === 'function' || typeof _config.xhr === 'object')\n\t\t\t) {\n\t\t\t\tthrow 'ContainerConfig.xhr should be a function or an object';\n\t\t\t}\n\t\t\tif (_config.xhr.dataType && typeof _config.xhr.dataType !== 'function') {\n\t\t\t\tthrow 'ContainerConfig.xhr.dataType should be a function';\n\t\t\t}\n\t\t\tif (_config.xhr.type && typeof _config.xhr.type !== 'function') {\n\t\t\t\tthrow 'ContainerConfig.xhr.type should be a function';\n\t\t\t}\n\t\t\tif (_config.xhr.url && typeof _config.xhr.url !== 'function') {\n\t\t\t\tthrow 'ContainerConfig.xhr.url should be a function';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n};\n\n/**\n * Root namespace of the F2 SDK\n * @module f2\n * @class F2\n */\nexport default {\n\t/**\n\t * Gets the current list of apps in the container\n\t * @method getContainerState\n\t * @returns {Array} An array of objects containing the appId\n\t */\n\tgetContainerState: function () {\n\t\tif (!_isInit()) {\n\t\t\tutils.log('F2.init() must be called before F2.getContainerState()');\n\t\t\treturn;\n\t\t}\n\n\t\tvar apps = [];\n\n\t\tfor (var i = 0; i < _apps.length; i++) {\n\t\t\tapps.push({\n\t\t\t\tappId: _apps[i].config.appId\n\t\t\t});\n\t\t}\n\n\t\treturn apps;\n\t},\n\t/**\n\t * Gets the current locale defined by the container\n\t * @method getContainerLocale\n\t * @returns {String} IETF-defined standard language tag\n\t */\n\tgetContainerLocale: function () {\n\t\tif (!_isInit()) {\n\t\t\tutils.log('F2.init() must be called before F2.getContainerLocale()');\n\t\t\treturn;\n\t\t}\n\n\t\treturn classes.ContainerConfig.locale;\n\t},\n\t/**\n\t * Initializes the container. This method must be called before performing\n\t * any other actions in the container.\n\t * @method init\n\t * @param {F2.ContainerConfig} config The configuration object\n\t */\n\tinit: function (config) {\n\t\t_config = config || {};\n\n\t\t_validateContainerConfig();\n\n\t\t_hydrateContainerConfig(_config);\n\n\t\t// dictates whether we use the old logic or the new logic.\n\t\t_initContainerEvents();\n\t},\n\t/**\n\t * Has the container been init?\n\t * @method isInit\n\t * @return {bool} True if the container has been init\n\t */\n\tisInit: _isInit,\n\t/**\n\t * Automatically load apps that are already defined in the DOM. Elements will\n\t * be rendered into the location of the placeholder DOM element. Any AppHandlers\n\t * that are defined will be bypassed.\n\t * @method loadPlaceholders\n\t * @param {Element} parentNode The element to search for placeholder apps\n\t */\n\tloadPlaceholders: function (parentNode) {\n\t\tvar self = this,\n\t\t\telements = [],\n\t\t\tappConfigs = [],\n\t\t\tadd = function (e) {\n\t\t\t\tif (!e) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telements.push(e);\n\t\t\t},\n\t\t\taddAll = function (els) {\n\t\t\t\tif (!els) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = els.length; i < len; i++) {\n\t\t\t\t\tadd(els[i]);\n\t\t\t\t}\n\t\t\t};\n\n\t\tif (!!parentNode && !dom.isNativeNode(parentNode)) {\n\t\t\tthrow '\"parentNode\" must be null or a DOM node';\n\t\t}\n\n\t\t// if the passed in element has a data-f2-appid attribute add\n\t\t// it to the list of elements but to not search within that\n\t\t// element for other placeholders\n\t\tif (parentNode && parentNode.hasAttribute('data-f2-appid')) {\n\t\t\tadd(parentNode);\n\t\t} else {\n\t\t\t// find placeholders within the parentNode only if\n\t\t\t// querySelectorAll exists\n\t\t\tparentNode = parentNode || document;\n\t\t\tif (parentNode.querySelectorAll) {\n\t\t\t\taddAll(parentNode.querySelectorAll('[data-f2-appid]'));\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, len = elements.length; i < len; i++) {\n\t\t\tvar appConfig = _getAppConfigFromElement(elements[i]);\n\t\t\tappConfigs.push(appConfig);\n\t\t}\n\n\t\tif (appConfigs.length) {\n\t\t\tself.registerApps(appConfigs);\n\t\t}\n\t},\n\t/**\n\t * Begins the loading process for all apps and/or initialization process for pre-loaded apps.\n\t * The app will be passed the {{#crossLink \"F2.AppConfig\"}}{{/crossLink}} object which will\n\t * contain the app's unique instanceId within the container. If the\n\t * {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}.root property is populated the app is considered\n\t * to be a pre-loaded app and will be handled accordingly. Optionally, the\n\t * {{#crossLink \"F2.AppManifest\"}}{{/crossLink}} can be passed in and those\n\t * assets will be used instead of making a request.\n\t * @method registerApps\n\t * @param {Array} appConfigs An array of {{#crossLink \"F2.AppConfig\"}}{{/crossLink}}\n\t * objects\n\t * @param {Array} [appManifests] An array of\n\t * {{#crossLink \"F2.AppManifest\"}}{{/crossLink}}\n\t * objects. This array must be the same length as the apps array that is\n\t * objects. This array must be the same length as the apps array that is\n\t * passed in. This can be useful if apps are loaded on the server-side and\n\t * passed down to the client.\n\t * @example\n\t * Traditional App requests.\n\t *\n\t *\t// Traditional f2 app configs\n\t *\tvar arConfigs = [\n\t *\t\t{\n\t *\t\t\tappId: 'com_externaldomain_example_app',\n\t *\t\t\tcontext: {},\n\t *\t\t\tmanifestUrl: 'http://www.externaldomain.com/F2/AppManifest'\n\t *\t\t},\n\t *\t\t{\n\t *\t\t\tappId: 'com_externaldomain_example_app',\n\t *\t\t\tcontext: {},\n\t *\t\t\tmanifestUrl: 'http://www.externaldomain.com/F2/AppManifest'\n\t *\t\t},\n\t *\t\t{\n\t *\t\t\tappId: 'com_externaldomain_example_app2',\n\t *\t\t\tcontext: {},\n\t *\t\t\tmanifestUrl: 'http://www.externaldomain.com/F2/AppManifest'\n\t *\t\t}\n\t *\t];\n\t *\n\t *\tF2.init();\n\t *\tF2.registerApps(arConfigs);\n\t *\n\t * @example\n\t * Pre-loaded and tradition apps mixed.\n\t *\n\t *\t// Pre-loaded apps and traditional f2 app configs\n\t *\t// you can preload the same app multiple times as long as you have a unique root for each\n\t *\tvar arConfigs = [\n\t *\t\t{\n\t *\t\t\tappId: 'com_mydomain_example_app',\n\t *\t\t\tcontext: {},\n\t *\t\t\troot: 'div#example-app-1',\n\t *\t\t\tmanifestUrl: ''\n\t *\t\t},\n\t *\t\t{\n\t *\t\t\tappId: 'com_mydomain_example_app',\n\t *\t\t\tcontext: {},\n\t *\t\t\troot: 'div#example-app-2',\n\t *\t\t\tmanifestUrl: ''\n\t *\t\t},\n\t *\t\t{\n\t *\t\t\tappId: 'com_externaldomain_example_app',\n\t *\t\t\tcontext: {},\n\t *\t\t\tmanifestUrl: 'http://www.externaldomain.com/F2/AppManifest'\n\t *\t\t}\n\t *\t];\n\t *\n\t *\tF2.init();\n\t *\tF2.registerApps(arConfigs);\n\t *\n\t * @example\n\t * Apps with predefined manifests.\n\t *\n\t *\t// Traditional f2 app configs\n\t *\tvar arConfigs = [\n\t *\t\t{appId: 'com_externaldomain_example_app', context: {}},\n\t *\t\t{appId: 'com_externaldomain_example_app', context: {}},\n\t *\t\t{appId: 'com_externaldomain_example_app2', context: {}}\n\t *\t];\n\t *\n\t *\t// Pre requested manifest responses\n\t *\tvar arManifests = [\n\t *\t\t{\n\t *\t\t\tapps: ['<div>Example App!</div>'],\n\t *\t\t\tinlineScripts: [],\n\t *\t\t\tscripts: ['http://www.domain.com/js/AppClass.js'],\n\t *\t\t\tstyles: ['http://www.domain.com/css/AppStyles.css']\n\t *\t\t},\n\t *\t\t{\n\t *\t\t\tapps: ['<div>Example App!</div>'],\n\t *\t\t\tinlineScripts: [],\n\t *\t\t\tscripts: ['http://www.domain.com/js/AppClass.js'],\n\t *\t\t\tstyles: ['http://www.domain.com/css/AppStyles.css']\n\t *\t\t},\n\t *\t\t{\n\t *\t\t\tapps: ['<div>Example App 2!</div>'],\n\t *\t\t\tinlineScripts: [],\n\t *\t\t\tscripts: ['http://www.domain.com/js/App2Class.js'],\n\t *\t\t\tstyles: ['http://www.domain.com/css/App2Styles.css']\n\t *\t\t}\n\t *\t];\n\t *\n\t *\tF2.init();\n\t *\tF2.registerApps(arConfigs, arManifests);\n\t */\n\tregisterApps: function (appConfigs, appManifests) {\n\t\tif (!_isInit()) {\n\t\t\tutils.log('F2.init() must be called before F2.registerApps()');\n\t\t\treturn;\n\t\t} else if (!appConfigs) {\n\t\t\tutils.log(\n\t\t\t\t'At least one AppConfig must be passed when calling F2.registerApps()'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\t\tvar appStack = [];\n\t\tvar batches = {};\n\t\tvar callbackStack = {};\n\t\tvar haveManifests = false;\n\t\tappConfigs = [].concat(appConfigs);\n\t\tappManifests = [].concat(appManifests || []);\n\t\thaveManifests = !!appManifests.length;\n\n\t\t// appConfigs must have a length\n\t\tif (!appConfigs.length) {\n\t\t\tutils.log(\n\t\t\t\t'At least one AppConfig must be passed when calling F2.registerApps()'\n\t\t\t);\n\t\t\treturn;\n\t\t\t// ensure that the array of apps and manifests are qual\n\t\t} else if (\n\t\t\tappConfigs.length &&\n\t\t\thaveManifests &&\n\t\t\tappConfigs.length != appManifests.length\n\t\t) {\n\t\t\tutils.log(\n\t\t\t\t'The length of \"apps\" does not equal the length of \"appManifests\"'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// validate each app and assign it an instanceId\n\t\t// then determine which apps can be batched together\n\t\tappConfigs.forEach(function (a, i) {\n\t\t\t// add properties and methods\n\t\t\ta = _createAppConfig(a);\n\n\t\t\t// Will set to itself, for preloaded apps, or set to null for apps that aren't already\n\t\t\t// on the page.\n\t\t\ta.root = a.root || null;\n\n\t\t\t// we validate the app after setting the root property because pre-load apps do no require\n\t\t\t// manifest url\n\t\t\tif (!_validateApp(a)) {\n\t\t\t\treturn; // move to the next app\n\t\t\t}\n\n\t\t\t// save app\n\t\t\t_apps[a.instanceId] = {\n\t\t\t\tconfig: a\n\t\t\t};\n\n\t\t\t// If the root property is defined then this app is considered to be preloaded and we will\n\t\t\t// run it through that logic.\n\t\t\tif (a.root && !_isPlaceholderElement(a.root)) {\n\t\t\t\tif (!a.root && typeof a.root != 'string' && !dom.isNativeNode(a.root)) {\n\t\t\t\t\tutils.log(\n\t\t\t\t\t\t'AppConfig invalid for pre-load, not a valid string and not dom node'\n\t\t\t\t\t);\n\t\t\t\t\tutils.log('AppConfig instance:', a);\n\t\t\t\t\tthrow 'Preloaded appConfig.root property must be a native dom node or a string representing a sizzle selector. Please check your inputs and try again.';\n\t\t\t\t}\n\n\t\t\t\t// instantiate F2.App\n\t\t\t\t_createAppInstance(a, {\n\t\t\t\t\tpreloaded: true,\n\t\t\t\t\tstatus: constants.AppStatus.SUCCESS\n\t\t\t\t});\n\n\t\t\t\t// Continue on in the .each loop, no need to continue because the app is on the page\n\t\t\t\t// the js in initialized, and it is ready to role.\n\t\t\t\treturn; // equivalent to continue in .each\n\t\t\t}\n\n\t\t\tif (!_isPlaceholderElement(a.root)) {\n\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\tconstants.AppHandlers.APP_CREATE_ROOT,\n\t\t\t\t\ta // the app config\n\t\t\t\t);\n\n\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\tconstants.AppHandlers.APP_RENDER_BEFORE,\n\t\t\t\t\ta // the app config\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// if we have the manifest, go ahead and load the app\n\t\t\tif (haveManifests) {\n\t\t\t\t_loadApps(a, appManifests[i]);\n\t\t\t} else {\n\t\t\t\t// check if this app can be batched\n\t\t\t\tif (a.enableBatchRequests) {\n\t\t\t\t\tbatches[a.manifestUrl.toLowerCase()] =\n\t\t\t\t\t\tbatches[a.manifestUrl.toLowerCase()] || [];\n\t\t\t\t\tbatches[a.manifestUrl.toLowerCase()].push(a);\n\t\t\t\t} else {\n\t\t\t\t\tappStack.push({\n\t\t\t\t\t\tapps: [a],\n\t\t\t\t\t\turl: a.manifestUrl\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// we don't have the manifests, go ahead and load them\n\t\tif (!haveManifests) {\n\t\t\t// add the batches to the appStack\n\t\t\tfor (var key in batches) {\n\t\t\t\tappStack.push({\n\t\t\t\t\turl: key,\n\t\t\t\t\tapps: batches[key]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if an app is being loaded more than once on the page, there is the\n\t\t\t// potential that the jsonp callback will be clobbered if the request\n\t\t\t// for the AppManifest for the app comes back at the same time as\n\t\t\t// another request for the same app.  We'll create a callbackStack\n\t\t\t// that will ensure that requests for the same app are loaded in order\n\t\t\t// rather than at the same time\n\t\t\tappStack.forEach(function (req) {\n\t\t\t\t// define the callback function based on the first app's App ID\n\t\t\t\tvar jsonpCallback = constants.JSONP_CALLBACK + req.apps[0].appId;\n\n\t\t\t\t// push the request onto the callback stack\n\t\t\t\tcallbackStack[jsonpCallback] = callbackStack[jsonpCallback] || [];\n\t\t\t\tcallbackStack[jsonpCallback].push(req);\n\t\t\t});\n\n\t\t\t// loop through each item in the callback stack and make the request\n\t\t\t// for the AppManifest. When the request is complete, pop the next\n\t\t\t// request off the stack and make the request.\n\t\t\tfor (var i in callbackStack) {\n\t\t\t\t/*jshint loopfunc: true */\n\t\t\t\tvar requests = callbackStack[i];\n\t\t\t\tvar manifestRequest = function (jsonpCallback, req) {\n\t\t\t\t\tif (!req) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// setup defaults and callbacks\n\t\t\t\t\tvar url = req.url,\n\t\t\t\t\t\ttype = 'GET',\n\t\t\t\t\t\tdataType = 'jsonp',\n\t\t\t\t\t\tcompleteFunc = function () {\n\t\t\t\t\t\t\tmanifestRequest(i, requests.pop());\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorFunc = function () {\n\t\t\t\t\t\t\treq.apps.forEach(function (item) {\n\t\t\t\t\t\t\t\titem.name = item.name || item.appId;\n\t\t\t\t\t\t\t\tutils.log('Removed failed ' + item.name + ' app', item);\n\t\t\t\t\t\t\t\tappHandlers.__trigger(\n\t\t\t\t\t\t\t\t\t_sAppHandlerToken,\n\t\t\t\t\t\t\t\t\tconstants.AppHandlers.APP_MANIFEST_REQUEST_FAIL,\n\t\t\t\t\t\t\t\t\titem // the app config\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tself.removeApp(item.instanceId);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccessFunc = function (appManifest) {\n\t\t\t\t\t\t\t_loadApps(req.apps, appManifest);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t// optionally fire xhr overrides\n\t\t\t\t\tif (_config.xhr && _config.xhr.dataType) {\n\t\t\t\t\t\tdataType = _config.xhr.dataType(req.url, req.apps);\n\t\t\t\t\t\tif (typeof dataType !== 'string') {\n\t\t\t\t\t\t\tthrow 'ContainerConfig.xhr.dataType should return a string';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (_config.xhr && _config.xhr.type) {\n\t\t\t\t\t\ttype = _config.xhr.type(req.url, req.apps);\n\t\t\t\t\t\tif (typeof type !== 'string') {\n\t\t\t\t\t\t\tthrow 'ContainerConfig.xhr.type should return a string';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (_config.xhr && _config.xhr.url) {\n\t\t\t\t\t\turl = _config.xhr.url(req.url, req.apps);\n\t\t\t\t\t\tif (typeof url !== 'string') {\n\t\t\t\t\t\t\tthrow 'ContainerConfig.xhr.url should return a string';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// setup the default request function if an override is not present\n\t\t\t\t\tvar requestFunc = _config.xhr;\n\t\t\t\t\tif (typeof requestFunc !== 'function') {\n\t\t\t\t\t\trequestFunc = function (\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\tappConfigs,\n\t\t\t\t\t\t\tsuccessCallback,\n\t\t\t\t\t\t\terrorCallback,\n\t\t\t\t\t\t\tcompleteCallback\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (!window.fetch) {\n\t\t\t\t\t\t\t\tthrow 'Browser does not support the Fetch API.';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar fetchFunc,\n\t\t\t\t\t\t\t\tfetchUrl =\n\t\t\t\t\t\t\t\t\turl +\n\t\t\t\t\t\t\t\t\t'?params=' +\n\t\t\t\t\t\t\t\t\tutils.stringify(req.apps, utils.appConfigReplacer);\n\n\t\t\t\t\t\t\t// Fetch API does not support the JSONP calls so making JSON calls using Fetch API and\n\t\t\t\t\t\t\t// JSONP call using fetch-jsonp package (https://www.npmjs.com/package/fetch-jsonp)\n\t\t\t\t\t\t\tif (dataType === 'json') {\n\t\t\t\t\t\t\t\tvar fetchInputs = {\n\t\t\t\t\t\t\t\t\tmethod: type,\n\t\t\t\t\t\t\t\t\tmode: 'no-cors'\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (type === 'POST') {\n\t\t\t\t\t\t\t\t\tfetchUrl = url;\n\t\t\t\t\t\t\t\t\tfetchInputs.body = {\n\t\t\t\t\t\t\t\t\t\tparams: utils.stringify(req.apps, utils.appConfigReplacer)\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfetchFunc = fetch(fetchUrl, fetchInputs);\n\t\t\t\t\t\t\t} else if (dataType === 'jsonp') {\n\t\t\t\t\t\t\t\tfetchFunc = fetchJsonp(fetchUrl, {\n\t\t\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\t\t\tjsonpCallbackFunction: jsonpCallback\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfetchFunc\n\t\t\t\t\t\t\t\t.then(function (response) {\n\t\t\t\t\t\t\t\t\treturn response.json();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(function (data) {\n\t\t\t\t\t\t\t\t\tsuccessCallback(data);\n\t\t\t\t\t\t\t\t\tcompleteCallback();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(function (error) {\n\t\t\t\t\t\t\t\t\tutils.log('Failed to load app(s)', error, req.apps);\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\trequestFunc(url, req.apps, successFunc, errorFunc, completeFunc);\n\t\t\t\t};\n\n\t\t\t\tmanifestRequest(i, requests.pop());\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Removes all apps from the container\n\t * @method removeAllApps\n\t */\n\tremoveAllApps: function () {\n\t\tvar self = this;\n\n\t\tif (!_isInit()) {\n\t\t\tutils.log('F2.init() must be called before F2.removeAllApps()');\n\t\t\treturn;\n\t\t}\n\n\t\tif (Object.keys(_apps).length > 0) {\n\t\t\tObject.keys(_apps).forEach(function (key) {\n\t\t\t\tself.removeApp(_apps[key].config.instanceId);\n\t\t\t});\n\t\t}\n\t},\n\t/**\n\t * Removes an app from the container\n\t * @method removeApp\n\t * @param {string} instanceId The app's instanceId\n\t */\n\tremoveApp: function (instanceId) {\n\t\tif (!_isInit()) {\n\t\t\tutils.log('F2.init() must be called before F2.removeApp()');\n\t\t\treturn;\n\t\t}\n\n\t\tif (_apps[instanceId]) {\n\t\t\tappHandlers.__trigger(\n\t\t\t\t_sAppHandlerToken,\n\t\t\t\tconstants.AppHandlers.APP_DESTROY_BEFORE,\n\t\t\t\t_apps[instanceId] // the app instance\n\t\t\t);\n\n\t\t\tappHandlers.__trigger(\n\t\t\t\t_sAppHandlerToken,\n\t\t\t\tconstants.AppHandlers.APP_DESTROY,\n\t\t\t\t_apps[instanceId] // the app instance\n\t\t\t);\n\n\t\t\tappHandlers.__trigger(\n\t\t\t\t_sAppHandlerToken,\n\t\t\t\tconstants.AppHandlers.APP_DESTROY_AFTER,\n\t\t\t\t_apps[instanceId] // the app instance\n\t\t\t);\n\n\t\t\tdelete _apps[instanceId];\n\t\t}\n\t}\n};\n","import EventEmitter2 from 'eventemitter2';\n\n/**\n * Handles [Context](../../app-development.html#context) passing from\n * containers to apps and apps to apps.\n * @class F2.Events\n */\nexport default (function () {\n\t// init EventEmitter\n\tvar _events = new EventEmitter2({\n\t\twildcard: true\n\t});\n\n\t// unlimited listeners, set to > 0 for debugging\n\t_events.setMaxListeners(0);\n\n\treturn {\n\t\t/**\n\t\t * Execute each of the listeners that may be listening for the specified\n\t\t * event name in order with the list of arguments.\n\t\t * @method emit\n\t\t * @param {string} event The event name\n\t\t * @param {object} [arg]* The arguments to be passed\n\t\t */\n\t\temit: function () {\n\t\t\treturn EventEmitter2.prototype.emit.apply(\n\t\t\t\t_events,\n\t\t\t\t[].slice.call(arguments)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Adds a listener that will execute n times for the event before being\n\t\t * removed. The listener is invoked only the first time the event is\n\t\t * fired, after which it is removed.\n\t\t * @method many\n\t\t * @param {string} event The event name\n\t\t * @param {int} timesToListen The number of times to execute the event\n\t\t * before being removed\n\t\t * @param {function} listener The function to be fired when the event is\n\t\t * emitted\n\t\t */\n\t\tmany: function (event, timesToListen, listener) {\n\t\t\treturn _events.many(event, timesToListen, listener);\n\t\t},\n\t\t/**\n\t\t * Remove a listener for the specified event.\n\t\t * @method off\n\t\t * @param {string} event The event name\n\t\t * @param {function} listener The function that will be removed\n\t\t */\n\t\toff: function (event, listener) {\n\t\t\treturn _events.off(event, listener);\n\t\t},\n\t\t/**\n\t\t * Adds a listener for the specified event\n\t\t * @method on\n\t\t * @param {string} event The event name\n\t\t * @param {function} listener The function to be fired when the event is\n\t\t * emitted\n\t\t */\n\t\ton: function (event, listener) {\n\t\t\treturn _events.on(event, listener);\n\t\t},\n\t\t/**\n\t\t * Adds a one time listener for the event. The listener is invoked only\n\t\t * the first time the event is fired, after which it is removed.\n\t\t * @method once\n\t\t * @param {string} event The event name\n\t\t * @param {function} listener The function to be fired when the event is\n\t\t * emitted\n\t\t */\n\t\tonce: function (event, listener) {\n\t\t\treturn _events.once(event, listener);\n\t\t}\n\t};\n})();\n","/**\n * Utility method to determine whether or not the argument passed in is or is not a native dom node.\n * @method isNativeNode\n * @param {object} testObject The object you want to check as native dom node.\n * @return {bool} Returns true if the object passed is a native dom node.\n */\nfunction isNativeNode(testObject) {\n\tvar bIsNode =\n\t\ttypeof Node === 'object'\n\t\t\t? testObject instanceof Node\n\t\t\t: testObject &&\n\t\t\t  typeof testObject === 'object' &&\n\t\t\t  typeof testObject.nodeType === 'number' &&\n\t\t\t  typeof testObject.nodeName === 'string';\n\n\tvar bIsElement =\n\t\ttypeof HTMLElement === 'object'\n\t\t\t? testObject instanceof HTMLElement //DOM2\n\t\t\t: testObject &&\n\t\t\t  typeof testObject === 'object' &&\n\t\t\t  testObject.nodeType === 1 &&\n\t\t\t  typeof testObject.nodeName === 'string';\n\n\treturn bIsNode || bIsElement;\n}\n\nexport default {\n\tisNativeNode\n};\n","/**\n * Tests a URL to see if it's on the same domain (local) or not\n * @method isLocal\n * @param {URL to test} url\n * @return {bool} Whether the URL is local or not\n * Derived from: https://github.com/jquery/jquery/blob/master/src/ajax.js\n */\nfunction isLocal(url) {\n\tvar rurl = /^([\\w.+-]+:)(?:\\/\\/([^/?#:]*)(?::(\\d+)|)|)/,\n\t\turlLower = url.toLowerCase(),\n\t\tparts = rurl.exec(urlLower),\n\t\tajaxLocation,\n\t\tajaxLocParts;\n\n\ttry {\n\t\tajaxLocation = location.href;\n\t} catch (e) {\n\t\t// Use the href attribute of an A element\n\t\t// since IE will modify it given document.location\n\t\tajaxLocation = document.createElement('a');\n\t\tajaxLocation.href = '';\n\t\tajaxLocation = ajaxLocation.href;\n\t}\n\n\tajaxLocation = ajaxLocation.toLowerCase();\n\n\t// uh oh, the url must be relative\n\t// make it fully qualified and re-regex url\n\tif (!parts) {\n\t\turlLower = toAbsolute(ajaxLocation, urlLower).toLowerCase();\n\t\tparts = rurl.exec(urlLower);\n\t}\n\n\t// Segment location into parts\n\tajaxLocParts = rurl.exec(ajaxLocation) || [];\n\n\t// do hostname and protocol and port of manifest URL match location.href? (a \"local\" request on the same domain)\n\tvar matched = !(\n\t\tparts &&\n\t\t(parts[1] !== ajaxLocParts[1] ||\n\t\t\tparts[2] !== ajaxLocParts[2] ||\n\t\t\t(parts[3] || (parts[1] === 'http:' ? '80' : '443')) !==\n\t\t\t\t(ajaxLocParts[3] || (ajaxLocParts[1] === 'http:' ? '80' : '443')))\n\t);\n\n\treturn matched;\n}\n\n/**\n * Parses URI\n * @method parse\n * @param {The URL to parse} url\n * @return {Parsed URL} string\n * Source: https://gist.github.com/Yaffle/1088850\n * Tests: http://skew.org/uri/uri_tests.html\n */\nfunction parse(url) {\n\tvar m = String(url)\n\t\t.replace(/^\\s+|\\s+$/g, '')\n\t\t.match(\n\t\t\t/^([^:/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/\n\t\t);\n\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\n\treturn m\n\t\t? {\n\t\t\t\thref: m[0] || '',\n\t\t\t\tprotocol: m[1] || '',\n\t\t\t\tauthority: m[2] || '',\n\t\t\t\thost: m[3] || '',\n\t\t\t\thostname: m[4] || '',\n\t\t\t\tport: m[5] || '',\n\t\t\t\tpathname: m[6] || '',\n\t\t\t\tsearch: m[7] || '',\n\t\t\t\thash: m[8] || ''\n\t\t  }\n\t\t: null;\n}\n\n/**\n * Abosolutizes a relative URL\n * @method toAbsolute\n * @param {e.g., location.href} base\n * @param {URL to absolutize} href\n * @return {string} URL\n * Source: https://gist.github.com/Yaffle/1088850\n * Tests: http://skew.org/uri/uri_tests.html\n */\nfunction toAbsolute(base, href) {\n\t// RFC 3986\n\n\tfunction removeDotSegments(input) {\n\t\tvar output = [];\n\t\tinput\n\t\t\t.replace(/^(\\.\\.?(\\/|$))+/, '')\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\n\t\t\t.replace(/\\/?[^/]*/g, function (p) {\n\t\t\t\tif (p === '/..') {\n\t\t\t\t\toutput.pop();\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(p);\n\t\t\t\t}\n\t\t\t});\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\n\t}\n\n\thref = parse(href || '');\n\tbase = parse(base || '');\n\n\treturn !href || !base\n\t\t? null\n\t\t: (href.protocol || base.protocol) +\n\t\t\t\t(href.protocol || href.authority ? href.authority : base.authority) +\n\t\t\t\tremoveDotSegments(\n\t\t\t\t\thref.protocol || href.authority || href.pathname.charAt(0) === '/'\n\t\t\t\t\t\t? href.pathname\n\t\t\t\t\t\t: href.pathname\n\t\t\t\t\t\t? (base.authority && !base.pathname ? '/' : '') +\n\t\t\t\t\t\t  base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) +\n\t\t\t\t\t\t  href.pathname\n\t\t\t\t\t\t: base.pathname\n\t\t\t\t) +\n\t\t\t\t(href.protocol || href.authority || href.pathname\n\t\t\t\t\t? href.search\n\t\t\t\t\t: href.search || base.search) +\n\t\t\t\thref.hash;\n}\n\nexport default {\n\tisLocal,\n\tparse,\n\ttoAbsolute\n};\n","import uri from './uri';\n\nexport default {\n\t/**\n\t * A function to pass into F2.stringify which will prevent circular\n\t * reference errors when serializing objects\n\t * @method appConfigReplacer\n\t */\n\tappConfigReplacer: function (key, value) {\n\t\tif (key == 'root' || key == 'ui' || key == 'height') {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t},\n\t/**\n\t * Creates a namespace on F2 and copies the contents of an object into\n\t * that namespace optionally overwriting existing properties.\n\t * @method extend\n\t * @param {string} ns The namespace to create. Pass a falsy value to\n\t * add properties to the F2 namespace directly.\n\t * @param {object} obj The object to copy into the namespace.\n\t * @param {bool} overwrite True if object properties should be overwritten\n\t * @return {object} The created object\n\t */\n\textend: function (ns, obj, overwrite) {\n\t\tvar isFunc = typeof obj === 'function';\n\t\tvar parts = ns ? ns.split('.') : [];\n\t\tvar parent = this;\n\t\tobj = obj || {};\n\n\t\t// ignore leading global\n\t\tif (parts[0] === 'F2') {\n\t\t\tparts = parts.slice(1);\n\t\t}\n\n\t\t// create namespaces\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {\n\t\t\tif (!parent[parts[i]]) {\n\t\t\t\tparent[parts[i]] = isFunc && i + 1 == len ? obj : {};\n\t\t\t}\n\t\t\tparent = parent[parts[i]];\n\t\t}\n\n\t\t// copy object into namespace\n\t\tif (!isFunc) {\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (typeof parent[prop] === 'undefined' || overwrite) {\n\t\t\t\t\tparent[prop] = obj[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn parent;\n\t},\n\t/**\n\t * Generates a somewhat random id\n\t * @method guid\n\t * @return {string} A random id\n\t * @for F2\n\t */\n\tguid: function () {\n\t\tvar S4 = function () {\n\t\t\treturn (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n\t\t};\n\t\treturn (\n\t\t\tS4() +\n\t\t\tS4() +\n\t\t\t'-' +\n\t\t\tS4() +\n\t\t\t'-' +\n\t\t\tS4() +\n\t\t\t'-' +\n\t\t\tS4() +\n\t\t\t'-' +\n\t\t\tS4() +\n\t\t\tS4() +\n\t\t\tS4()\n\t\t);\n\t},\n\t/**\n\t * Tests a URL to see if it's on the same domain (local) or not\n\t * @method isLocal\n\t * @param {URL to test} url\n\t * @return {bool} Whether the URL is local or not\n\t */\n\tisLocalRequest: uri.isLocal,\n\t/**\n\t * A utility logging function to write messages or objects to the browser console. This is a proxy for the [`console` API](https://developers.google.com/chrome-developer-tools/docs/console).\n\t * @method log\n\t * @param {object|string} Object/Method An object to be logged _or_ a `console` API method name, such as `warn` or `error`. All of the console method names are [detailed in the Chrome docs](https://developers.google.com/chrome-developer-tools/docs/console-api).\n\t * @param {object} [obj2]* An object to be logged\n\t * @example\n\t\t//Pass any object (string, int, array, object, bool) to .log()\n\t\tF2.log('foo');\n\t\tF2.log(myArray);\n\t\t//Use a console method name as the first argument.\n\t\tF2.log('error', err);\n\t\tF2.log('info', 'The session ID is ' + sessionId);\n\t\t* Some code derived from [HTML5 Boilerplate console plugin](https://github.com/h5bp/html5-boilerplate/blob/master/js/plugins.js)\n\t\t*/\n\tlog: function () {\n\t\tvar _log;\n\t\tvar _logMethod = 'log';\n\t\tvar method;\n\t\tvar noop = function () {};\n\t\tvar methods = [\n\t\t\t'assert',\n\t\t\t'clear',\n\t\t\t'count',\n\t\t\t'debug',\n\t\t\t'dir',\n\t\t\t'dirxml',\n\t\t\t'error',\n\t\t\t'exception',\n\t\t\t'group',\n\t\t\t'groupCollapsed',\n\t\t\t'groupEnd',\n\t\t\t'info',\n\t\t\t'log',\n\t\t\t'markTimeline',\n\t\t\t'profile',\n\t\t\t'profileEnd',\n\t\t\t'table',\n\t\t\t'time',\n\t\t\t'timeEnd',\n\t\t\t'timeStamp',\n\t\t\t'trace',\n\t\t\t'warn'\n\t\t];\n\t\tvar length = methods.length;\n\t\tvar console = (window.console = window.console || {});\n\t\tvar args;\n\n\t\twhile (length--) {\n\t\t\tmethod = methods[length];\n\n\t\t\t// Only stub undefined methods.\n\t\t\tif (!console[method]) {\n\t\t\t\tconsole[method] = noop;\n\t\t\t}\n\n\t\t\t//if first arg is a console function, use it.\n\t\t\t//defaults to console.log()\n\t\t\tif (arguments && arguments.length > 1 && arguments[0] == method) {\n\t\t\t\t_logMethod = method;\n\t\t\t\t//remove console func from args\n\t\t\t\targs = Array.prototype.slice.call(arguments, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (Function.prototype.bind) {\n\t\t\t_log = Function.prototype.bind.call(console[_logMethod], console);\n\t\t} else {\n\t\t\t_log = function () {\n\t\t\t\tFunction.prototype.apply.call(\n\t\t\t\t\tconsole[_logMethod],\n\t\t\t\t\tconsole,\n\t\t\t\t\targs || arguments\n\t\t\t\t);\n\t\t\t};\n\t\t}\n\n\t\t_log.apply(this, args || arguments);\n\t},\n\t/**\n\t * Wrapper to convert a JSON string to an object\n\t * @method parse\n\t * @param {string} str The JSON string to convert\n\t * @return {object} The parsed object\n\t */\n\tparse: function (str) {\n\t\treturn JSON.parse(str);\n\t},\n\t/**\n\t * Wrapper to convert an object to JSON\n\t *\n\t * **Note: When using F2.stringify on an F2.AppConfig object, it is\n\t * recommended to pass F2.appConfigReplacer as the replacer function in\n\t * order to prevent circular serialization errors.**\n\t * @method stringify\n\t * @param {object} value The object to convert\n\t * @param {function|Array} replacer An optional parameter that determines\n\t * how object values are stringified for objects. It can be a function or an\n\t * array of strings.\n\t * @param {int|string} space An optional parameter that specifies the\n\t * indentation of nested structures. If it is omitted, the text will be\n\t * packed without extra whitespace. If it is a number, it will specify the\n\t * number of spaces to indent at each level. If it is a string (such as '\\t'\n\t * or '&nbsp;'), it contains the characters used to indent at each level.\n\t * @return {string} The JSON string\n\t */\n\tstringify: function (value, replacer, space) {\n\t\treturn JSON.stringify(value, replacer, space);\n\t},\n\t/**\n\t * Function to get the F2 version number\n\t * @method version\n\t * @return {string} F2 version number\n\t */\n\tversion: function () {\n\t\t/* eslint no-undef: 0 */\n\t\treturn VERSION;\n\t}\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import container from './container';\n\nexport default function () {\n\tvar callback = function () {\n\t\tvar autoloadEls = [],\n\t\t\tadd = function (e) {\n\t\t\t\tif (!e) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tautoloadEls.push(e);\n\t\t\t},\n\t\t\taddAll = function (els) {\n\t\t\t\tif (!els) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = els.length; i < len; i++) {\n\t\t\t\t\tadd(els[i]);\n\t\t\t\t}\n\t\t\t};\n\n\t\t// support id-based autoload\n\t\tadd(document.getElementById('f2-autoload'));\n\n\t\t// support class/attribute based autoload\n\t\tif (document.querySelectorAll) {\n\t\t\taddAll(document.querySelectorAll('[data-f2-autoload]'));\n\t\t\taddAll(document.querySelectorAll('.f2-autoload'));\n\t\t}\n\n\t\t// if elements were found, auto-init F2 and load any placeholders\n\t\tif (autoloadEls.length) {\n\t\t\tcontainer.init();\n\t\t\tfor (var i = 0, len = autoloadEls.length; i < len; i++) {\n\t\t\t\tcontainer.loadPlaceholders(autoloadEls[i]);\n\t\t\t}\n\t\t}\n\t};\n\n\tif (\n\t\tdocument.readyState === 'complete' ||\n\t\t(document.readyState !== 'loading' && !document.documentElement.doScroll)\n\t) {\n\t\tcallback();\n\t} else {\n\t\tdocument.addEventListener('DOMContentLoaded', callback);\n\t}\n}\n","import AppHandlers from './appHandlers';\nimport Apps from './apps';\nimport autoload from './autoload';\nimport Classes from './classes';\nimport Constants from './constants';\nimport container from './container';\nimport Events from './events';\nimport utils from './utils';\n\nautoload();\n\n/**\n * Open F2\n * @module f2\n * @main f2\n */\nconst lib = {\n\t...utils,\n\t...Classes,\n\t...container,\n\tAppHandlers,\n\tApps,\n\tConstants,\n\tEvents\n};\n\n// always export F2 as a global\nwindow.F2 = lib;\n\nexport default lib;\n"],"sourceRoot":""}